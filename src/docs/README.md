## **🚀 기능 구현 명세서**

---

### 입력 기능

- [X]  1️⃣ 결제금액 입력 기능

      🚨 조건
    - 1000원 단위로 입력 받는다.
    - 1000원 단위로 떨어지지 않으면 예외처리 한다.
         ```
         구입금액을 입력해 주세요.
         ```


- [X]  4️⃣ 당첨 번호 입력 기능

    🚨조건 
    - 당첨 번호는 1부터 45 사이의 정수 6개를 입력받는다.
    - 당첨 번호는 서로 중복되지 않아야 한다.
    - 당첨 번호는 쉼표(,)를 기준으로 구분한다.

    

- [X]  5️⃣ 보너스 번호 입력 기능

    🚨 조건
    - 보너스 번호는 1부터 45 사이의 정수 하나를 입력받는다.
    - 보너스 번호는 당첨 번호와 중복되지 않아야 한다.

### 로또 발행 기능

- [X]  2️⃣ `로또 구입 갯수` 만큼의 수를 반복으로 서로 다른 6자리의 숫자 배열을 생성한다.

    🚨 조건
    - 각 번호의 범위는 **1 ~ 45사이의 자연수**
    - 로또 번호의 배열은 **오름차순 정렬**

### 당첨 내역 계산 기능

- [X]  6️⃣ 각 로또 번호의 배열을 당첨번호 및 보너스 번호와 비교해 내역을 계산하는 기능

    🚨 조건

       - 당첨은 1등부터 5등까지 있다. 당첨 기준과 금액은 아래와 같다.
           - 1등: 6개 번호 일치 / 2,000,000,000원
           - 2등: 5개 번호 + 보너스 번호 일치 / 30,000,000원
           - 3등: 5개 번호 일치 / 1,500,000원
           - 4등: 4개 번호 일치 / 50,000원
           - 5등: 3개 번호 일치 / 5,000원
       


### 수익률 계산 기능

- [X]  7️⃣ 로또 구매 금액과 수익을 비교해 수익률을 계산하는 기능

    🚨 조건
    - 수익률은 소수점 둘째 자리에서 반올림한다. (ex. 100.0%, 51.5%, 1,000,000.0%)

### 출력 기능

- [X]  3️⃣ 발행한 로또 수량 및 번호 출력 기능

   ```
   n개를 구매했습니다.
   [8, 21, 23, 41, 42, 43]
   [3, 5, 11, 16, 32, 38]
   [7, 11, 16, 35, 36, 44]
   [1, 8, 11, 31, 41, 42]
   ```


- [X]  8️⃣ 당첨 내역 출력 기능

   ```
   당첨 통계
   ---
   3개 일치 (5,000원) - x개
   4개 일치 (50,000원) - y개
   5개 일치 (1,500,000원) - z개
   5개 일치, 보너스 볼 일치 (30,000,000원) - q개
   6개 일치 (2,000,000,000원) - r개
   ```


- [X]  9️⃣ 수익률 출력 기능

   ```
   총 수익률은 62.5%입니다.
   ```


### 예외처리 기능

**입력기능 예외 처리**
- [X] 공통 예외 처리
   - 입력값이 빈 값인 경우
  
      `[ERROR] 아무것도 입력하지 않았습니다.`

   - 입력값에 공백이 있는 경우

      `[ERROR] 입력값에 공백이 있으면 안됩니다.`

- [X]  1️⃣ 결제 금액 입력 기능
    - 1000원 단위로 떨어지지 않을 때 하는 예외처리

      `[ERROR] 결제 금액은 1000원 단위로 입력해주셔야 합니다.`

    - 숫자가 아닌 다른 입력값이 들어왔을 때의 예외처리

      `[ERROR] 결제 금액은 숫자만 입력해주셔야 합니다.`


- [X]  4️⃣ 로또 번호, 당첨 번호 입력 예외 기능
    - 당첨 번호 또한 로또 번호의 일종이므로 같은 범주
    - 6개의 숫자를 입력받지 못했을 때의 예외처리

      `[ERROR] 로또 번호 또는 당첨 번호는 6가지의 숫자가 필요합니다. 번호의 구분은 쉼표(,)로 해주세요.`

    - 양의 정수가 아닌 다른 값(특수문자, 문자, 공백)의 예외처리

      `[ERROR] 로또 번호 또는 당첨 번호는 양의 정수만 가능합니다.`

    - 범위가 아닌 숫자를 입력 받을때의 예외처리

      `[ERROR] 로또 번호 또는 당첨 번호는 '1부터 45까지'의 숫자만 가능합니다.`

    - 중복값이 들어간 경우의 예외처리

      `[ERROR] 로또 번호 또는 당첨 번호는 중복값을 가질 수 없습니다.`


- [X]  5️⃣ 보너스 번호 입력 예외 기능
    - 숫자가 아닌 다른 값(특수문자, 문자)의 예외처리

      `[ERROR] 보너스 번호는 '숫자'만 입력해주셔야 합니다.`

    - 범위가 아닌 숫자를 입력 받을때의 예외처리

      `[ERROR] 보너스 번호는 1부터 45까지의 '숫자'만 입력해주셔야 합니다.`

    - 당첨 번호와 중복된 숫자를 입력 받을때의 예외처리

      `[ERROR] 보너스 번호는 1부터 45까지의 자연수 중 당첨 번호와 중복되지 않는 값을 입력해주셔야 합니다.`

### 예외처리 후 해당 부분 재입력 기능
- [X] 사용자가 잘못된 값을 입력할 경우 throw문을 사용해 예외를 발생시킨다. 그런 다음, "[ERROR]"로 시작하는 에러 메시지를 출력하고 해당 부분부터 입력을 다시 받는다.

## **🏗️ 테스트 코드 구현 사항**

---

### 입력값 처리 관련 테스트

- `CommonValidatorTest`
   - 입력값이 빈 값인 경우
   - 입력값에 공백이 있는 경우

### 클래스 관련 테스트

- `LottoMachineTest`
   - 결제 금액이 1000원 단위로 떨어지지 않는 경우
   - 결제 금액이 숫자가 아닌 다른 입력값이 들어왔을 경우
   - 결제 금액에 맞게 로또가 발행되는지에 대한 경우
- `LottoTest`
   - 로또 번호가 6개가 아닌 경우
   - 로또 번호에 중복값이 있는 경우
   - 로또 번호의 범위가 1 ~ 45 사이에 있지 않은 경우
   - 로또 번호가 오름차순으로 발행되는지에 대한 경우
- `WinningLottoTest`
  - `WinningLotto`의 경우 `Lotto`를 상속 받기 때문에 LottoTest와 동일한 테스트 진행 안함
  - 보너스 번호가 숫자가 아닌 경우
  - 보너스 번호가 당첨 번호와 중복값이 경우
  - 보너스 번호의 범위가 1 ~ 45 사이에 있지 않은 경우
  - `WinningLotto`가 잘 만들어 지는 경우
- `WinningMachineTest`
  - 당첨에 관련된 기능을 담당하는 클래스
  - `calculateStatistic` 메서드가 정상 장독 하는지에 대한 테스트



## 📢 추가된 요구사항

---

-  [X] 함수(또는 메서드)의 길이가 15라인을 넘어가지 않도록 구현한다.
    - 함수(또는 메서드)가 한 가지 일만 잘 하도록 구현한다.
-  [X] else를 지양한다.
    - if 조건절에서 값을 return하는 방식으로 구현하면 else를 사용하지 않아도 된다.
    - 때로는 if/else, switch문을 사용하는 것이 더 깔끔해 보일 수 있다. 어느 경우에 쓰는 것이 적절할지 스스로 고민해 본다.
-  [X] 도메인 로직에 단위 테스트를 구현해야 한다. 단, UI(Console.readLineAsync, Console.print) 로직에 대한 단위 테스트는 제외한다.
    - 핵심 로직을 구현하는 코드와 UI를 담당하는 로직을 구분한다.
-  [X] 제공된 `Lotto` 클래스를 활용해 구현해야 한다.
    - `numbers`의 `#` prefix를 변경할 수 없다.
    - `Lotto`에 필드를 추가할 수 없다.

