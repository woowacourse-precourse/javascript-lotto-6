# 미션 - 로또

### 기능 요구 사항(규칙)

> 로또 게임 기능은 아래와 같은 규칙으로 진행된다.

- 로또 번호의 숫자 범위는 `1~45`의 `양의 정수` (v)
- 1개의 로또를 발행할 때 중복되지 않는 `6개`, 보너스 번호 `1개`를 뽑는다. (v)
- 당첨은 `1등`부터 `5등`까지 있다. 당첨 금액은 아래와 같다. (v)

  1.  6개 번호 일치 / 2,000,000,000원(이십억원) (v)
  2.  5개 번호 + 보너스 번호 일치 / 30,000,000원(삼천만원) (v)
  3.  5개 번호 일치 / 1,500,000원(백오십만원) (v)
  4.  4개 번호 일치 / 50,000원(오만원) (v)
  5.  3개 번호 일치 / 5,000원(오천원) (v)

- 로또 구입 금액을 입력하면 구입 금액에 해당하는 만큼 로또를 발행해야 한다. (v)
- 로또 1장의 가격은 1,000원(천원)이다. (v)
- 당첨 번호와 보너스 번호를 입력받는다. (v)
- 사용자가 구매한 로또 번호와 당첨 번호를 비교하여 당첨 내역 및 수익률을 출력하고 로또 게임을 종료한다. (v)
- 사용자가 잘못된 값을 입력할 경우 `throw`문을 사용해 예외를 발생시킨다. 그 후 `[ERROR]`로 시작하는 에러 메세지를 출력하고 `해당 부분부터 입력을 다시 받는다.` (v)

---

### 입출력 요구 사항

**입력**

- `로또 구입 금액`을 입력받는다. (v)
  - 구입 금액은 1,000원(천원) 단위로 입력받는다. (v)
  - 1,000원(천원)으로 나누어 떨어지지 않는 경우 예외 처리한다. (v)

```shell
14000 // good
2000 // good
13500 // bad
1300 // bad
```

- `당첨 번호`를 `6개` 입력받는다. (v)
  - 로또를 자동으로만 구매했다고 생각하면 된다. (v)
  - 번호는 `쉼표(,)`를 기준으로 구분한다. (v)

```
1,2,3,4,5,6
```

- `보너스 번호`를 `1개` 입력받는다. (v)

```
10
```

출력

- `발행한 로또 수량` 및 `발행한 로또 각각의 번호`를 출력한다. (v)
  - 로또 번호는 `오름차순으로 정렬`하여 보여준다. (v)

```
8개를 구매했습니다.
[8, 21, 23, 41, 42, 43]
[3, 5, 11, 16, 32, 38]
[7, 11, 16, 35, 36, 44]
[1, 8, 11, 31, 41, 42]
[13, 14, 16, 38, 42, 45]
[7, 11, 30, 40, 42, 43]
[2, 13, 22, 32, 38, 45]
[1, 3, 5, 14, 22, 45]
```

- 당첨 내역을 출력한다. (v)
  - 상금 목록에 해당하는 번호에 수를 추가하여 출력한다. (v)

```
3개 일치 (5,000원) - 1개
4개 일치 (50,000원) - 0개
5개 일치 (1,500,000원) - 0개
5개 일치, 보너스 볼 일치 (30,000,000원) - 0개
6개 일치 (2,000,000,000원) - 0개
```

- 수익률은 소수점 둘째 자리에서 반올림한다. (ex. 100.0%, 51.5%, 1,000,000.0%) (v)

```
총 수익률은 62.5%입니다.
```

- 예외 상황 시 에러 문구를 출력해야 한다. 단, 에러 문구는 `[ERROR]`로 시작해야 한다. (v)

```
[ERROR] 로또 번호는 1부터 45 사이의 숫자여야 합니다.
```

---

### 추가된 요구 사항 (마지막에 다시 확인하기)

- [ ] 함수(또는 메서드)의 길이가 15라인을 넘어가지 않도록 구현한다.
  - [ ] 함수(또는 메서드)가 한 가지 일만 잘 하도록 구현한다.
- [ ] `else`를 지양한다.
- [ ] 도메인 로직에 단위 테스트를 구현해야 한다.
  - [ ] 단, UI(Console.readLintAsync, Console.print) 로직에 대한 단위 테스트는 제외한다
  - [ ] 핵심 로직을 구현하는 코드와 UI를 담당하는 로직을 구분한다.
  - [ ] 단위 테스트 작성이 익숙하지 않다면 `__tests__/LottoTest.js`를 참고하여 학습 후 구현한다.

---

### 프로젝트 실행 흐름

1. 구입금액 입력 단계 (v)
   1. `구입 금액을 입력해 주세요.` (v)
   2. <구입 금액 입력> (v)

- (공백) (v)

2. 구매 개수 및 로또 번호 출력 단계 (v)
   1. <구입 금액/1,000>`개를 구매했습니다.` (v)
   2. 구입한 로또들(랜덤, 1~45 양의 정수, 중복 불가) 출력 (v)

- (공백) (v)

3. 당첨 번호 입력 단계 (v)
   1. `당첨 번호를 입력해 주세요.` (v)
   2. 당첨 번호 6개(1~45의 양의 정수, 중복 불가), `콤마(,)`기준 입력 (v)

- (공백) (v)

4. 보너스 번호 입력 단계 (v)
   1. `보너스 번호를 입력해 주세요.` (v)
   2. 보너스 번호 1개(1~45 사이의 양의 정수, 당첨 번호와 중복 불가) 입력 (v)

- (공백) (v)

5. 당첨 통계 단계 (v)
   1. `당첨 통계`
   2. `---`
   3. `3개 일치 (5,000원) - `<3개 일치 개수>`개`
   4. `4개 일치 (50,000원) - `<4개 일치 개수>`개`
   5. `5개 일치 (1,500,000원) - `<5개 일치 개수>`개`
   6. `5개 일치, 보너스 볼 일치 (30,000,000원) - `<5개 일치, 보너스 공 일치 개수>`개`
   7. `6개 일치 (2,000,000,000원) - `<6개 일치 개수>`개`
   8. `총 수익률은` <수익률>`%입니다.`

---

### 다이어그램

![](https://i.imgur.com/UGgaxsM.png)

---

### 구현할 기능

- [x] App.js에 일련의 과정 제작 (v)

입력 기능

- [x] 구매금액 입력 (v)
- [x] 당첨번호 입력 (v)
- [x] 보너스 번호 입력 (v)

출력 기능

- [x] 시스템 메세지 출력 (v)
- [x] 구매개수 및 로또 번호 출력 (v)
- [x] 당첨 통계 출력 (v)

계산 기능

- [x] 구매 개수 계산 (v)
- [x] 구매 금액 대비 수익률 계산 (v)
- [x] 랜덤 번호 공 생성 기능 (v)
- [x] 우승 상금 합산 기능 (v)

조건 기능

- [x] 당첨 번호 매칭되는 개수 세기 (v)
- [x] 보너스 번호가 매칭되는지 확인하기 (v)

변환 기능

- [x] 입력값 분리 기능 (v)
- [x] 단일 문자열 숫자로 변환 기능 (v)
- [x] 문자열 배열 숫자로 변환 기능 (v)
- [x] 각 로또가 몇등인지 확인하고 세는 기능 (v)

정렬 기능

- [x] 입력값 정렬 기능 (v)

---

### 예외처리(테스트)

생성값 예외처리 - 로또

- [x] 로또 번호가 6개임을 확인하는 처리(구현되어있음) (v)
- [x] 숫자에 중복이 있는지 확인하는 처리(TODO) (v)

입력값 예외처리 - 금액

- [x] 입력값이 없거나 공백만 있을 경우에 대한 예외처리 (v)
- [x] 입력받은 값이 숫자인지 확인하는 처리 (v)
- [x] 로또 가격으로 나눴을 떄 잔돈이 존재하는지 확인 (v)

입력값 예외처리 - 당첨 번호들

- [x] 입력값이 없거나 공백만 있을 경우에 대한 예외처리 (v)
- [x] ,를 기준으로 나누었을 때 길이가 <당첨번호 개수>가 아닌 경우 (v)
- [x] 배열이 되었을 때 공백이 포함되는 경우 (v)
- [x] 배열이 되었을 때 모두 숫자가 아닌 경우 (v)
- [x] 각 숫자들이 중복되었을 때 예외처리 (v)
- [x] 당첨 번호들의 각 숫자중 하나라도 로또 숫자 범위 안에 없으면 예외처리 (v)

입력값 예외처리 - 보너스 번호

- [x] 입력값이 없거나 공백만 있을 경우에 대한 예외처리 (v)
- [x] 입력받은 값이 숫자인지 확인하는 처리 (v)
- [x] 보너스 번호가 로또 숫자 범위 안에 없으면 예외처리 (v)
- [x] 보너스 번호가 당첨 번호와 중복되는 경우 에외처리 (v)

출력값 테스트 - 수익률

- [x] 수익률 소숫점 자릿수가 다를 경우에 대한 예외처리 (v)

그 외 예외처리를 하지 않은 함수에 대해서는 올바른 값 출력에 대한 테스트 작성

---

### 요구조건 확인하기 (3주차 목표)

- [x] 함수 분리 (v)
- [x] 함수별 테스트 작성 (v)
- [x] (new) 클래스(객체)를 분리하는 연습 (v)
- [x] (new) 도메인 로직에 대한 단위 테스트를 작성하는 연습 (v)

---

### 스스로 모아본 주의사항 체크리스트

- [x] 시작 전 본인 깃허브 닉네임으로 된 브랜치를 만들고 체크아웃 하기 (v)
- [x] 체크아웃 이후 docs/README.md에 구현할 기능 목록을 정리해 추가하기 (v)
- [x] 구분없는 `let`, `const`를 사용하지 않기 (v)
- [x] 같은 변수에 값을 재할당하지 않기 (v)
- [x] 반복문에 의미없는 변수를 선언하였는지 확인하기 ex. `for(let i=0; i<n; i+=1)` (v)
- [x] [커밋 메시지 컨벤션](https://gist.github.com/stephenparish/9941e89d80e2bc58a153)을 지켜 커밋 메세지 작성하기 (v)

---

### 2주차 공통 피드백 확인하기

- [x] README.md를 상세히 작성한다 (v)
  - [x] 지금 하는 프로젝트가 어떤 프로젝트인지 소개했는가? (v)
  - [x] 어떤 기능을 담고 있는지 잘 나타내었는가? (v)
- [x] 기능 목록을 재검토한다 (v)
  - [x] 너무 상세하게 작성하지 않도록 한다. (v)
  - [x] 예외적인 상황도 정리했는가? (v)
- [x] 기능 목록을 업데이트한다 (v)
  - [x] 기능을 구현하면서 문서를 계속 업데이트해나가고 있는가? (v)
- [x] 값을 하드 코딩하지 않는다 (v)
  - [x] 문자열, 숫자 등의 값들을 상수를 통해 관리하고 있는가? (v)
- [x] 구현 순서도 코딩 컨벤션이다 (v)
  - [x] 클래스를 필드, 생성자, 메서드 순으로 작성했는가? (v)
- [x] 한 함수가 한 가지 기능만 담당하게 한다
- [ ] 함수가 한 가지 기능을 하는지 확인하는 기준을 세운다 (?)
  - [ ] 여러 함수에서 중복되어 사용하는 코드를 함수 분리를 통해 관리하였는가?
  - [ ] 함수의 길이를 15라인을 넘지 않도록 분리하였는가?
- [x] JavaScript에서 객체를 만드는 다양한 방법을 이해하고 사용한다. (v)
  - [x] **[JavaScript 객체 기본](https://developer.mozilla.org/ko/docs/Learn/JavaScript/Objects/Basics)** 참고 (v)
  - [x] [Classes](https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Classes) 참고 (v)
- [ ] 테스트를 작성하는 이유에 대해 본인의 경험을 토대로 정리해본다
  - [ ] 테스트에 어떤 유용함을 느꼈는 지 알아본다
  - [x] [학습테스트를 통해 JUnit 학습하기](https://techcourse-storage.s3.ap-northeast-2.amazonaws.com/9b82d8a360c548fcadd14c551dbcbe06) 참고 (v)
- [x] 처음부터 큰 단위의 테스트를 만들지 않는다 (v)
  - [x] 문제를 작게 나누었는가? (v)
  - [x] 핵심 기능에 가까운 부분부터 테스트를 만들었는가? (v)
