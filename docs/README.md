## 3주차 미션 - 로또

### ✨ 기능목록

> 구현할 기능 목록

- [x] 로또 구입 금액 유효성 검사
  - 클래스 `PurchaseAmount`와 메서드 `createPurchaseAmount`를 이용해서 구입 금액을 받아옴.
  - 또한 `validatePurchaseAmount` 메서드를 이용해 유효성검사 완료.
  - [x] 로또 구입 금액 테스트
    - `PurchaseAmountTest.js`로 작은 단위인 유효성 검사 테스트 완료.
- [x] 랜덤으로 나오는 로또 번호 출력
  - `RandomNumber` 클래스를 이용해서 랜덤으로 나오는 로또 번호 생성 및 출력.
- [x] 당첨 번호 입력 및 생성
  - `Lotto` 클래스를 이용해 당첨번호 입력을 받고, 생성.
- [x] 당첨 번호 입력 유효성 검사
  - `Lotto`클래스 내의 `#validate` 메서드에 유효성 검사 작성.
- [x] 보너스 번호 입력 유효성 검사
  - `BonusNumber` 클래스 내의 `#validate` 메서드에 유효성 검사 작성.
- [x] 당첨번호(당첨번호, 보너스번호)와 로또번호 비교
  - `checkWinningCnt` 를 이용해서 당첨번호와 로또번호 비교 작성.
- [x] 당첨 금액 출력
  - `printWinningMoney` 를 이용해서 당첨 금액 출력 작성.
- [x] 수익률 계산
  - `calculateReturn` 메서드를 이용해 계산.
  - 부동소수점 문제가 있어서 조금 더 수정해야함.(`toPrecision` 으로 해결)
- [x] 기능별 테스트 함수 작성
  - [x] 도메인 로직에 단위 테스트
    - `PurchaseAmountTest`, `LottoTest`, `BonusNumberTest`, `GameTest` 로 각각의 단위 테스트 완료.

> 기능 목록 외 생각할 부분

- [x] 초기 세팅이 잘 적용되고 있는가
  - [x] eslint 와 prettier 이 오류없이 잘 작동하는가
  - [x] EOL이 모든 파일에 잘 적용됐는가
- [x] 들여쓰기 depth가 2이하인가
- [x] 한 가지의 함수가 하나의 기능만 하는가
- [x] 한 가지의 함수가 길이가 15줄 미만인가
- [x] 하드코딩 하지 말기(상수화 필수!)

<br>

---

### ✅ 테스트 시나리오

> 작은 단위의 테스트 시나리오

- **구입비용에 대한 테스트 시나리오**

  ```
  1. 입력받은 수가 숫자인지
    1-1. 입력받은 수가 숫자일 때
        - 구입비용 클래스를 생성하는 인자로 활용
    1-2. 입력받은 수가 숫자가 아닐 때
        - 에러를 발생시키며 종료
  2. 입력받은 객체가 빈공간이 있는지
    2-1. 입력받은 객체가 빈공간이 없을 때
        - 구입비용 클래스를 생성하는 인자로 활용
    2-2. 입력받은 객체가 빈공간이 있을 때
        - 에러를 발생시키며 종료
  3. 조건(1000단위로 입력)에 맞는지
    3-1. 조건에 맞을 때
        - 구입비용 클래스를 생성하는 인자로 활용
    3-2. 조건에 맞지 않을 때(1000단위로 나누어 떨어지지 않을 때)
        - 에러를 발생시키며 종료
  ```

- **당첨번호에 대한 테스트 시나리오**

  ```
  0. 정해진 형식을 지켰는지(숫자 + 콤마)형식 ---> 숫자인지 아닌지 거를 수 있음.
  1. 입력받은 수가 숫자로만 이루어져 있는지. (x)
    1-1. 입력받은 수가 숫자일 때
      1-1-1. 숫자가 0이라면
            - 에러를 발생시키며 종료
      1-1-2. 숫자의 범위가 1~45가 아니라면
            - 에러를 발생시키며 종료
      1-1-3. 숫자 중 중복된 수가 있다면
            - 에러를 발생시키며 종료
    1-2. 입력받은 수가 숫자가 아닐 때
        - 에러를 발생시키며 종료
  2. 입력받은 수의 배열이 길이가 6인지
    2-1. 수의 길이가 6이 아닐 때
        - 에러를 발생시키며 종료

  ```

  _보너스 숫자에 대한 유효성 검사도 상당부분 비슷하다._

  - **게임 진행 테스트 시나리오**

  ```
  0. 기본적으로 구입비용, 로또 번호, 당첨 번호, 보너스 번호가 입력되어 있는 상황
  1. 당첨 개수에 대한 다양한 테스트 시도(구입 비용은 8천원)
    1-1 당첨 개수가 3개이다.
        - 당첨 금액을 계산하고 수익률 출력
    1-2 당첨 개수가 5개이다.
        1-2-1. 보너스 번호 당첨이 안된경우
        1-2-2. 보너스 번호가 당첨된 경우
            - 각각의 당첨 금액 계산하고 수익률 출력
    1-3 당첨 개수가 6개이다.
        - 당첨 금액을 계산하고 수익률 출력
  ```

  <br>

> 큰 단위의 테스트 시나리오

<br>

---

### 😂 유의사항

- 클래스의 구현순서를 유의하자.

  ```javascript
  class A {
    // 필드
    // 생성자
    // 메서드
  }
  ```

- 각각의 메서드를 작성할 때, 테스트코드를 염두에 두고 작성한다.

  - `TDD` 형식은 x.
  - 기능요구사항을 우선시하며, 코드 작성하지만,
  - 다른 곳에서도 이용하기 쉽게 작성해보기.

- 작은 단위의 테스트부터 큰 단위의 테스트로 나아간다.

  - 작은 단위의 테스트이지만, `테스트 시나리오`도 작성해보기.

- 각각의 메서드가 15줄 이하로 작성되야 한다.

---

<br>

### 🔎 디렉토리 설명 (기능 메서드)

| 디렉토리 명                  |                                설명                                 |
| :--------------------------- | :-----------------------------------------------------------------: |
| constants                    |                          상수화 시킨 모듈                           |
| constants/input-constants    |                          입력문 질문 상수                           |
| constants/magic-number       |                              숫자 상수                              |
| constants/validate-constants |                     유효성 검사 에러 출력 상수                      |
|                              |                                                                     |
| lotto-game                   |                       로또 게임 진행하는 모듈                       |
|                              |                                                                     |
| lotto                        |                  로또 게임(미션 전체) 클래스 모듈                   |
| lotto/PurchaseAmount         |                           구입비용 클래스                           |
| lotto/RandomNumber           |                        랜덤 로또 번호 클래스                        |
| lotto/BonusNumber            |                         보너스 숫자 클래스                          |
|                              |                                                                     |
| utils                        |                         각종 실행 함수 모듈                         |
| utils/create-object          | **PurchaseAmount**, **Lotto**, **BonusNumber** 클래스 만드는 메서드 |
| utils/ui-method              |    **readLineAsync**, **print** 메서드를 재사용하기 위한 메서드     |
|                              |                                                                     |
| App.js                       |                           메인 실행 파일                            |
| lotto/Lotto                  |                          당첨 번호 클래스                           |

---

### 🐛 eslint 와 ES6문법 충돌사항

> import 오류

- Babel없이 import하려면 확장자를 붙여야 한다.  
  하지만 eslint는 확장자를 없애는 것을 규칙으로 하기에,
  계속해서 오류가 뜨게 된다.

- .eslintrc.cjs 파일의 `rules`에  
  `"import/extensions": [ "error", "ignorePackages" ]` 를 추가한다.

  ```cjs
  "rules": {
  "import/extensions": [<severity>, "never" | "always" | "ignorePackages"]
  }
  ```

  `<severity>` 에는 `error`, `warn`등의 엄격도를 표시한다.  
  `never` : 확장자 사용을 금지한다.  
  `always` : 모든 구문에 확장자를 사용한다.  
  `ignorePackages` : 라이브러리 패키지를 제외하고 확장자를 사용한다.

> no-console 오류

- 코드 작성 도중에 상당히 많은 오류가 생기므로,
  이것 또한 `rules`에 추가해서 없앨 수 있다.

  ```cjs
  "no-console": process.env.NODE_ENV === 'production' ? 'error' : 'off',
  ```

- **이외에도 필수가 아닌 오류에 대해서 `rules` 에 추가하면서 하면 더 도움이 되는 듯 하다.**

<br>

---

_npm i -D eslint-plugin-import 설치가 효과가 있었는지는 모르겠음...._
