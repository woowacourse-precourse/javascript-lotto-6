# 💪 3주차 목표

- 함수가 하나의 기능만 수행할 수 있도록 분리하기.
- **클래스(객체)를 분리하는 연습하기.**
- **도메인 로직에 대한 단위테스트 작성 연습하기.**
- **2주차 피어 코드를 분석**하며 어떤 기준으로 클래스를 구분했고, 그에 맞는 테스트 코드를 어떻게 작성했는지 확인하기.
- 기능목록에 많은 것을 담으려고 하지않고 구현해야 할 기능목록만을 정리하는 데 집중하자. **이때 예외적인 상황도 기능목록에 정리한다.**
- 살아있는 기능목록 만들기. 추가에 대한 두려움을 떨치자.
- 나만의 경험을 토대로 테스트 작성 이유 정리하기.

---

# 🛠 기능목록

- [✔]유저로부터 구입 금액을 입력받는다.
  - [✔]숫자를 입력하지 않은 경우 `예외처리`한다.
  - [✔]1000원으로 나누어 떨어지지 않는 경우 `예외처리`한다.
  - [✔]예외처리한 메시지를 콘솔에 출력하고 구입금액을 다시 입력받는다.
- [✔]구입한 갯수만큼 로또를 발행한다.
  - [✔]구매한 갯수만큼 로또가 발행되지 않으면 `예외처리`한다.
  - [✔]로또에 중복된 수가 있으면 `예외처리`한다.
  - [✔]로또의 길이가 6개가 아니면 `예외처리`한다.
- [✔]발행한 로또 수량 및 번호를 오름차순으로 정렬해서 출력한다.
- [✔]당첨번호를 입력받는다.
  - [✔]번호는 쉼표기준으로 구분한다.
  - [✔]숫자를 입력하지 않은 경우 `예외처리`한다.
  - [✔]중복된 수가 있으면 `예외처리`한다.
  - [✔]길이가 6개가 아니면 `예외처리`한다.
  - [✔]1부터 45사이의 수가 아니면 `예외처리`한다.
  - [✔]예외처리한 메시지를 콘솔에 출력하고 당첨번호를 다시 입력받는다.
- [✔]보너스 번호를 입력받는다.
  - [✔]숫자가 아니면 `예외처리`한다.
  - [✔]공백, 아무값도 입력하지 않은 경우도 `예외처리`한다.
  - [✔]1부터 45사이의 숫자가 아니면 `예외처리`한다.
  - [✔]당첨번호와 중복되었다면 `예외처리`한다.
  - [✔]예외처리한 메시지를 콘솔에 출력하고 보너스번호를 다시 입력받는다.
- [✔]당첨내역을 구한다.
  - [✔]당첨번호와 각각의 로또번호를 비교하여 일치갯수를 저장한다.
  - [✔]예를 들어 로또 3개를 샀고 각각의 로또마다 일치갯수는 `[3,0,1]: 3개일치, 0개일치, 1개일치` 이렇게 배열로 나타낸다.
  - [✔]일치갯수를 전달하여 당첨내역을 구한다. 당첨내역은 위의 배열을 전달 받으면 `{ three:1, four:0, fiveNotBonus:0, fiveAndBonus:0, all:0 }` 이렇게 생성된다.
- [✔]당첨내역으로 수익율을 구한다.
  - [✔]수익률은 소수점 둘째자리에서 반올림한다.
  - [✔]수익률은 소수점 첫째자리까지 출력되어야한다. 예를 들어 100이 아니라 100.0 이렇게 출력되어야한다.
- [✔]당첨내역과 수익률을 전달해 콘솔에 출력한다.
  - [✔]당첨내역과 그에 맞는 콘솔 메시지를 매칭시킨다.

---

# 🐛 FIX 목록

- [✔]에러 메시지를 출력하고 해당 부분부터 입력을 다시 받을 때, 재귀호출 함수가 비동기이기 때문에 리턴을 명시해야 반환값이 올바르게 들어온다.

---

# ♻ 리팩토링 목록

- [✔]구매갯수를 받는 기능을 따로 분리하지 않고, 로또를 자동발행받는 로직에서 동시에 구현
- [✔]당첨번호와 보너스번호 타입변환을 어디서 할지 통일한다.
  - [✔]입력값에 대한 정확한 에러처리를 위해서 InputValidator에서 유효성 검사 후에 타입변환 후 반환한다.
- [✔]하드코딩한 부분은 상수로 변환한다.
- [✔]출력형식에 맞게끔 출력하는지 확인한다. 빼놓은 문장은 없는지 확인한다.
- [✔]당첨번호 에러 메시지가 입력값에 따라 올바르게 출력되도록 수정한다. 문자를 입력했는데 1부터 45사이의 수를 입력하라는 메시지가 아니라 숫자를 입력하라는 메시지를 출력해야한다.
- [✔]유효성 검사가 중복된다면 하나의 함수로 만든다.
- [✔]테스트코드가 올바르게 문서화되어있는지 점검한다.
- [✔]당첨된 결과가 Map자료형인데 key에 해당하는 부분이 객체로 되어있어서 가독성이 너무 좋지 않다. 자료형을 객체로 변경하고 테스트코드를 작성할 때도 기대값을 명확하게 알아볼 수 있도록 수정한다.
