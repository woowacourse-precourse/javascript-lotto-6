# 📃 기능 목록

---

## 목차

1. [⛵ 1. 플로우 차트](#-1-플로우-차트)
2. [📩 2. 입출력 관련 기능](#-2-입출력-관련-기능)<br>
   2.1. [입력](#21-입력)<br>
   2.2. [출력 형식](#22-출력-형식)<br>
   2.3. [전체 실행 결과 예시](#23-전체-실행-결과-예시)<br>
3. [🚨 3. 유효성 검사 관련 기능](#-3-유효성-검사-관련-기능)
4. [🎉 4. 게임 진행 관련 기능](#-4-게임-진행-관련-기능)<br>
   4.1. [당첨 로또 생성 기능](#41-당첨-로또-생성-기능)<br>
   4.2. [로또 당첨 통계 기능](#42-로또-당첨-통계-기능)<br>
5. [💸 5. 총 수익률 산출 기능](#-5-총-수익률-산출-기능)
6. [📺 6. 출력 화면 작성 기능](#-6-출력-화면-작성-기능)
7. [🗂 7. 구현된 클래스](#-7-구현된-클래스)
8. [🔩🔧 8. 메서드 목록](#-8-메서드-목록)
9. [📚 9. 사용된 라이브러리](#-9-사용된-라이브러리)

---

## ⛵ 1. 플로우 차트

<img src="./flowchart.drawio.svg" alt="기능 플로우 차트">

---

## 📩 2. 입출력 관련 기능

### 2.1. 입력

- **사용자로부터 로또 구입 금액을 입력 받는다.**

  - `구입금액을 입력해 주세요.`라는 문구를 출력하며 입력을 받는다.
  - `구입 금액`은 1,000으로 나누어 떨어지는 자연수만 가능하다.

- **사용자로부터 당첨 번호를 입력 받는다.**

  - `당첨 번호를 입력해 주세요.`라는 문구를 출력하며 입력을 받는다.
  - `당첨 번호`는 쉼표(,)를 기준으로 구분하여 6자리를 입력 받아야 한다.
  - 각 `당첨 번호`는 1과 45사이의 자연수만 가능하다.
  - 각 `당첨 번호`는 중복을 허락하지 않는다.

- **사용자로부터 보너스 번호를 입력 받는다.**

  - `보너스 번호를 입력해 주세요.`라는 문구를 출력하며 입력을 받는다.
  - `보너스 번호`는 1과 45사이의 자연수만 가능하다.
  - `보너스 번호`는 `당첨 번호`와 중복되지 않아야 한다.

- **모든 입력은 `@woowacourse/mission-utils` 라이브러리의 `Console.readLineAsync` 를 사용하여 받는다.**

_입력 예시 1- **구입 금액**_

```
구입금액을 입력해 주세요.
8000
```

_입력 예시 2- **당첨 번호를 입력해 주세요.**_

```
당첨 번호를 입력해 주세요.
1,2,3,4,5,6
```

_입력 예시 3- **보너스 번호를 입력해 주세요.**_

```
보너스 번호를 입력해 주세요.
7
```

### 2.2. 출력 형식

- **발행한 로또 수량 및 번호를 출력한다.**

  - 로또 구입 금액을 입력 받은 뒤 출력한다.
  - 로또 번호를 오름차순으로 정렬하여 보여준다.

- **당첨 내역을 출력한다.**
  - 보너스 번호를 입력 받은 뒤 출력한다.
  - 발행한 로또들의 당첨 통계를 출력한다.

출력 예시

```
당첨 통계
---
3개 일치 (5,000원) - 1개
4개 일치 (50,000원) - 0개
5개 일치 (1,500,000원) - 0개
5개 일치, 보너스 볼 일치 (30,000,000원) - 0개
6개 일치 (2,000,000,000원) - 0개
총 수익률은 62.5%입니다.
```

- **총 수익을 출력한다.**

  - 보너스 번호를 입력 받은 뒤 출력한다.
  - 발행한 로또들의 당첨 통계를 출력한다.

- **출력은 `@woowacourse/mission-utils` 라이브러리의 `Console.print` 를 사용한다.**

**_구입 급액 입력 후 출력 결과_**

```
8개를 구매했습니다.
[8, 21, 23, 41, 42, 43]
[3, 5, 11, 16, 32, 38]
[7, 11, 16, 35, 36, 44]
[1, 8, 11, 31, 41, 42]
[13, 14, 16, 38, 42, 45]
[7, 11, 30, 40, 42, 43]
[2, 13, 22, 32, 38, 45]
[1, 3, 5, 14, 22, 45]
```

**_보너스 번호 입력 후 출력 결과_**

```
당첨 통계
---
3개 일치 (5,000원) - 1개
4개 일치 (50,000원) - 0개
5개 일치 (1,500,000원) - 0개
5개 일치, 보너스 볼 일치 (30,000,000원) - 0개
6개 일치 (2,000,000,000원) - 0개
```

**_총 수익률 출력_**

```
총 수익률은 62.5%입니다.
```

### 2.3. 전체 실행 결과 예시

```
구입금액을 입력해 주세요.
8000

8개를 구매했습니다.
[8, 21, 23, 41, 42, 43]
[3, 5, 11, 16, 32, 38]
[7, 11, 16, 35, 36, 44]
[1, 8, 11, 31, 41, 42]
[13, 14, 16, 38, 42, 45]
[7, 11, 30, 40, 42, 43]
[2, 13, 22, 32, 38, 45]
[1, 3, 5, 14, 22, 45]

당첨 번호를 입력해 주세요.
1,2,3,4,5,6

보너스 번호를 입력해 주세요.
7

당첨 통계
---
3개 일치 (5,000원) - 1개
4개 일치 (50,000원) - 0개
5개 일치 (1,500,000원) - 0개
5개 일치, 보너스 볼 일치 (30,000,000원) - 0개
6개 일치 (2,000,000,000원) - 0개
총 수익률은 62.5%입니다.
```

---

## 🚨 3. 유효성 검사 관련 기능

### 사용자로부터 입력받은 값의 유효성을 검사한다.

- ### 구입금액

  - `구입 금액`이 1,000으로 나누어 떨어지는 자연수가 아닐 경우 `[ERROR] 구입 금액은 1,000단위의 자연수만 가능합니다.`라는 메시지를 출력하고 다시 입력 받는다.

- ### 당첨 번호

  - `당첨 번호`가 쉼표(,)로 구분되어 있지 않거나 6개가 아니라면 `[ERROR] 당첨 번호는 쉼표(,)를 기준으로 구분하며 6개 입력해야 합니다.` 라는 메시지를 출력하고 다시 입력 받는다.
  - `당첨 번호` 중 중복된 수가 존재한다면 `[ERROR] 당첨 번호는 중복된 수가 존재해서는 안됩니다.`라는 메시지를 출력하고 다시 입력 받는다.
  - `당첨 번호` 중 자연수가 아닌 값이 존재한다면 `당첨 번호는 자연수여야 합니다.` 라는 메시지를 출력하고 다시 입력 받는다.
  - `당첨 번호` 중 1과 45사이의 존재한다면 `당첨 번호는 1과 45사이의 값만 입력 가능합니다.` 라는 메시지를 출력하고 다시 입력 받는다.

- ### 보너스 번호
  - `보너스 번호` 중 자연수가 아닌 값이 존재한다면 `보너스 번호는 자연수여야 합니다.` 라는 메시지를 출력하고 다시 입력 받는다.
  - `보너스 번호`가 1과 45사이의 자연수가 아니라면 `보너스 번호는 1과 45사이의 자연수만 입력 가능합니다.`라는 메시지를 출력하고 다시 입력 받는다.
  - `보너스 번호`가 당첨 번호와 중복 된다면 `당첨 번호 중 보너스 번호와 중복된 값이 존재합니다.`라는 메시지를 출력하고 다시 입력 받는다.

_**잘못된** 입력 예시 1- **구입 금액**_

```
-5000
```

_**잘못된** 입력 예시 2- **구입 금액**_

```
삼천원
```

_**잘못된** 입력 예시 3- **구입 금액**_

```
8500
```

_**잘못된** 입력 예시 4- **당첨 번호**_

```
1,2,3,4,5,6,7
```

_**잘못된** 입력 예시 5- **당첨 번호**_

```
1,2,3,4,5
```

_**잘못된** 입력 예시 6- **당첨 번호**_

```
1 2 3 4 5 6
```

_**잘못된** 입력 예시 7- **당첨 번호**_

```
0,2,3,4,5,46
```

_**잘못된** 입력 예시 8- **당첨 번호**_

```
1,2,3,4,5,5
```

_**잘못된** 입력 예시 9- **보너스 번호**_

```
//당첨 번호 - 1,2,3,4,5,6
4
```

---

## 🎉 4. 게임 진행 관련 기능

### 4.1. 당첨 로또 생성 기능

- 입력 받은 당첨 번호와, 보너스 번호로 당첨 로또 객체를 생성한다.

당첨 로또 예시

```
const winningNums = {
	winningNum = [1,2,3,4,5,6] // 실제론 입력받은 당첨 번호들을 담은 배열로 대체
	bonus = 7 // 실제론 입력받은 보너스 변수로 대체
}
```

### 4.2. 로또 당첨 통계 기능

- 1,000원 당 한장으로 계산하고, 구매한 금액 만큼의 로또를 생성한다.

  - 8,000원 -> 8장
  - 로또 번호 발행 - `MissionUtils.Random.pickUniqueNumbersInRange(1, 45, 6);`

- 각 1,000원어치의 로또마다 객체`Lotto`를 생성하여 배열`Lottos`에 담아 관리한다.

  - `Lotto` 멤버 변수
    - `발행 번호`
    - `당첨 결과` ex ) `5개 일치, 보너스 볼 일치`

- 생성된 각 Lotto 객체의 `발행 번호`와 `당첨 로또`를 비교하고 결과를 `당첨 결과`에 저장한다.
- `Lottos` 배열을 이용해 당첨 통계를 반환한다.

당첨 통계 예시

```
const obj = {
	"3개 일치 (5,000원)": 0,
  "4개 일치 (50,000원)": 0,
  "5개 일치 (1,500,000원)": 0,
  "5개 일치, 보너스 볼 일치 (30,000,000원)": 0,
  "6개 일치 (2,000,000,000원)": 0,
}
```

---

## 💸 5. 총 수익률 산출 기능

### 당첨금 액수

| 당첨 결과                  | 당첨금          |
| -------------------------- | --------------- |
| 3개 일치                   | 5,000원         |
| 4개 일치                   | 50,000원        |
| 5개 일치                   | 1,500,000원     |
| 5개 일치, 보너스 번호 일치 | 30,000,000원    |
| 6개 일치                   | 2,000,000,000원 |

### 수익률 계산

- 4.2에서 생성한 당첨 통계 obj를 사용하여 총 당첨금을 계산한다.
- (계산된 당첨금) / (구입 금액) 으로 수익률을 산출한다.
- 수익률은 소수점 둘째 자리에서 반올림한다. (ex. 100.0%, 51.5%, 1,000,000.0%)

---

## 📺 6. 출력 화면 작성 기능

### 3.2.의 출력 형식을 참고하여 위 기능들에서 산출된 자원들 가공하여 출력 화면을 작성한다.

---

## 🗂 7. 구현된 클래스

### 클래스 목록

| 폴더명         | 기능                                    |
| -------------- | --------------------------------------- |
| 🎁 `Constants` | 매직 넘버, 문자열 포장 상수 클래스 폴더 |

| 클래스명                | 기능                                           |
| ----------------------- | ---------------------------------------------- |
| 🔴 `App.js`             | 메인 클래스                                    |
| 🟠 `UserInput.js`       | 사용자에게 입력을 요청하고 받는다.             |
| 🟡 `UserOutput.js`      | 자원들을 형식에 맞게 가공하여 출력한다.        |
| 🟢 `ValidateInput.js`   | 사용자에게 입력받은 값들의 유효성을 검사한다.  |
| 🔵 `Lotto.js`           | 한장의 로또 객체 역할 및 당첨 결과를 계산한다. |
| 🟣 `LottoGame.js`       | 구매한 모든 로또들의 당첨 통계를 관리한다.     |
| 🟤 `Calculator.js`      | 당첨 통계의 수익률을 계산한다.                 |
| ⚫ `LottoResultChecker` | 당첨 결과를 판단한다.                          |
| ⚪ `NumberIssuance.js`  | 로또 번호를 발행한다.                          |

### 폴더 구조

```
src
 ┣ Constants               🎁
 ┣ io
 ┃ ┣ UserInput.js          🟠
 ┃ ┗ UserOutput.js         🟡
 ┣ services
 ┃ ┣ Calculator.js         🟤
 ┃ ┣ LottoResultChecker.js ⚫
 ┃ ┗ NumberIssuance.js     ⚪
 ┣ utils
 ┃ ┗ ValidateInput.js      🟢
 ┣ App.js                  🔴
 ┣ index.js
 ┣ Lotto.js                🔵
 ┗ LottoGame.js            🟣
```

---

## 🔩🔧 8. 메서드 목록

### 🔴 App.js

| 메서드명           | 기능                                             |
| ------------------ | ------------------------------------------------ |
| `play()`           | 가장 큰 범위에서 전체적인 진행을 담당한다.       |
| `generateResult()` | 결과(당첨 통계)를 출력하기 위한 자원을 생성한다. |

### 🟠 UserInput.js

| 메서드명             | 기능                      |
| -------------------- | ------------------------- |
| `getAmount()`        | 구입 금액을 입력받는다.   |
| `getWinningNumber()` | 당첨 번호를 입력받는다.   |
| `getBonusNumber()`   | 보너스 번호를 입력받는다. |

### 🟡 UserOutput.js

| 메서드명              | 기능                                         |
| --------------------- | -------------------------------------------- |
| `diplayPurchase()`    | 구입한 로또의 수와 로또들의 번호를 출력한다. |
| `displayStatistics()` | 당첨 통계를 출력한다.                        |
| `displayRevenue()`    | 총 수익률을 출력한다.                        |

### 🟢 ValidateInput.js

| 메서드명                  | 기능                                            |
| ------------------------- | ----------------------------------------------- |
| `validateAmount()`        | 입력받은 구입 금액에 대한 유효성을 검사한다.    |
| `validateWinningNumber()` | 입력 받은 당첨 번호에 대한 유효성을 검사한다.   |
| `validateBonusNumber()`   | 입력 받은 보너스 번호에 대한 유효성을 검사한다. |

### 🔵 Lotto.js

| 메서드명        | 기능                                                      |
| --------------- | --------------------------------------------------------- |
| `validate()`    | 인자로 넘겨받은 당첨 번호의 유효성을 검사한다.            |
| `checkResult()` | 당첨 결과 확인 메소드로 로또 번호와 당첨 번호를 전달한다. |

### 🟣 LottoGame.js

| 메서드명               | 기능                                                                 |
| ---------------------- | -------------------------------------------------------------------- |
| `start()`              | 각 로또의 당첨 결과들을 확인하여 당첨 통계 객체를 생성한다.          |
| `generateStatistics()` | 당첨 통계 객체를 사용하여 화면에 출력할 당첨 통계 문자열을 생성한다. |

### 🟤 Calculator.js

| 메서드명            | 기능                                           |
| ------------------- | ---------------------------------------------- |
| `calculateRevenu()` | 전체 당첨금과 구매 금액으로 수익률을 계산한다. |

### ⚫ LottoResultChecker.js

| 메서드명            | 기능                                                            |
| ------------------- | --------------------------------------------------------------- |
| `checkResult()`     | 구매한 로또의 번호와 당첨 번호를 대조하여 일치한 개수를 셈한다. |
| `determineResult()` | 구매한 로또의 번호와 당첨 번호를 대조하여 결과를 생성한다.      |

### ⚪ NumberIssuance.js

| 메서드명           | 기능                                  |
| ------------------ | ------------------------------------- |
| `generateNumber()` | 구매한 로또들의 로또 번호를 생성한다. |

---

## 📚 9. 사용된 라이브러리

![Static Badge](https://img.shields.io/badge/Library-%40woowacourse%2Fmission-utils%2C?color=%2300BFB2)
<br>
[woowacourse-projects/javascript-mission-utils: Utility library for mission (github.com)](https://github.com/woowacourse-projects/javascript-mission-utils)
