# 3주차 미션 - 로또

<hr/>

> **구현할 기능 목록**

## 로또 구입 금액 입력기능

**(입력값은 User 클래스의 inputMoney 메서드에서 처리)**

- `구입금액을 입력해 주세요.`를 출력하고 입력값을 받는다.
- 입력받은 금액에 대한 검증
  - 정규식으로 0부터 9까지만 입력되었는지 확인한다. (공백, 문자, 음수, 소수점)
  - 1000원으로 나눈 뒤 나머지가 남는지 확인한다.
- 금액이 유효하지 않을 경우 "[ERROR] 로또 구입 금액이 잘못된 형식입니다."를 출력하고 다시 입력을 받는다.
- 검증을 통과했다면 로또의 개수를 계산 한다.

---

## 로또 발행 기능

**(LottoList 클래스의 생성자에서 처리하며, 로또 번호는 Random 라이브러리를 사용해 생성)**

- 구매한 로또의 개수를 출력한다. `n개를 구매했습니다.`
- 구매한 개수(n)에 맞춰 아래 과정을 반복한다.
  - 중복되지 않는 1~45 사이의 숫자 6개 숫자를 뽑는다.
  - 숫자를 오름차순으로 정렬한다.
  - 발행한 로또의 번호를 출력한다.

---

## 당첨 번호 입력 기능

**(입력값은 User 클래스의 inputWinningNumbers 메서드에서 처리)**

- `당첨 번호를 입력해 주세요.`를 출력하고 입력값을 받는다.
- 입력한 당첨 번호를 검증
  - 먼저 당첨 번호를 `,` 기준으로 `split`한다.
  - 중복된 숫자가 있는지 확인한다.
  - 돌면서 숫자가 1~45까지의 숫자인지 확인한다. (공백, 문자, 음수, 소수점)
  - 입력한 당첨 번호가 유효하지 않을 경우 `[ERROR] 당첨 번호가 잘못된 형식입니다.`를 출력하고 다시 입력을 받는다.

---

## 보너스 번호 입력 기능

**(입력값은 User 클래스의 inputBonusNumber 메서드에서 처리)**

- `보너스 번호를 입력해 주세요.`를 출력하고 입력값을 받는다.
- 입력한 보너스 번호를 검증
  - 1부터 45까지의 숫자인지 확인한다. (공백, 문자, 음수, 소수점)
  - 당첨 번호와 중복되지 않는지 확인한다.
  - 번호가 유효하지 않을 경우 `[ERROR] 보너스 번호가 잘못된 형식입니다.`를 출력하고 다시 입력을 받는다.

---

## 당첨 결과 계산 기능

**(LottoResultCalculator 클래스의 #calculateResults 메서드에서 처리)**

- `당첨 통계`와 `---`를 출력한다.
- 사용자가 구매한 로또 수 만큼 아래 과정을 반복한다.
  - 사용자가 구매한 로또 번호와 당첨 번호를 비교한다.
  - 일치하는 번호의 개수를 확인한다.
    - 만약 5개 일때: 보너스 번호를 확인 하고 있다면 2등 없다면 3등으로 처리한다.
  - 해당 계산한 등수 개수를 토대로 하기 내용을 출력한다.
  ```
  3개 일치 (5,000원) - 0개
  4개 일치 (50,000원) - 0개
  5개 일치 (1,500,000원) - 0개
  5개 일치, 보너스 볼 일치 (30,000,000원) - 0개
  6개 일치 (2,000,000,000원) - 0개
  ```

---

## 수익률 계산 및 출력 기능

**( CalculateProfit 클래스의 #calculateProfit 메서드와 printResults 메서드에서 처리)**

- 당첨 결과에 따른 총 수익금을 계산한다.
  - (총 수익금 / 로또 구입 금액) \* 100 으로 계산
  - 소수점 둘째 자리에서 반올림한다.
- 수익률을 계산 후 `총 수익률은 (x)%입니다.` 내용으로 수익률을 출력한다.

---

> **구현방식**

객체 지향 프로그래밍(OOP) 원칙에 따라 설계하였습니다. 전체 게임 흐름을 제어하는 App 클래스, 사용자 입력을 관리하는 User 클래스, 로또 리스트를 관리하는 LottoList 클래스, 각각의 로또를 관리하는 Lotto 클래스, 로또 결과를 계산하는 LottoResultCalculator 클래스, 그리고 수익률을 계산하는 CalculateProfit 클래스로 구성하여 구현하였습니다.

- **App 클래스**는 게임 전체의 흐름을 제어합니다. 사용자로부터 입력을 받아 로또를 생성하고, 당첨 번호와 보너스 번호를 입력 받아 결과를 계산하고 출력합니다.

- **User 클래스**는 사용자로부터 로또 구입 금액, 당첨 번호, 보너스 번호를 입력 받고 이를 검증합니다. 검증이 완료된 값들은 User 클래스의 상태로 저장됩니다.

- **LottoList 클래스**는 여러 개의 Lotto 인스턴스를 관리합니다. User 클래스에서 검증된 로또 구입 금액을 바탕으로 각각의 Lotto 인스턴스를 생성하며, 이들을 관리합니다.

- **Lotto 클래스**는 개별 로또를 관리합니다. 로또는 자신의 번호를 가지고 있으며, 번호의 유효성을 검사하는 기능을 가집니다.

- **LottoResultCalculator 클래스**는 로또의 결과를 계산합니다. 사용자의 로또 리스트와 당첨 번호, 보너스 번호를 바탕으로 각 결과의 개수를 계산하고, 이를 출력합니다.

- **CalculateProfit 클래스**는 수익률을 계산합니다. LottoResultCalculator에서 계산된 결과와 사용자의 총 지출 금액을 바탕으로 수익률을 계산하고, 이를 출력합니다.

이렇게 구현된 클래스들은 각각의 역할에 집중할 수 있도록 설계하였으며, 코드의 가독성과 유지 보수성을 향상시키도록 했습니다. 또한, 각 클래스에서는 입력 값의 유효성을 검사하고, 유효하지 않은 값이 들어올 경우 에러 메시지를 출력하도록 구현하여 프로그램의 안정성을 높였습니다.
