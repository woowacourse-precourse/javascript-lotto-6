# 미션 - 로또

## 🔍 프로젝트 설명

> 구입한 로또의 개수만큼 번호를 받고, 사용자가 당첨 번호와 보너스 번호를 입력하여 당첨된 로또의 개수, 금액, 수익률을 알 수 있는 게임이다.

### 프로젝트 상세 설명

1. 사용자는 로또를 구입한다.

- 로또 1장의 가격은 1,000원이다.
- 1,000원 단위로만 구입이 가능하다.

2. 사용자가 구입한 금액에 해당하는 만큼 로또를 발행 받는다.

- 로또 번호의 숫자 범위는 1부터 45까지이다.
- 각각 중복되지 않는 6개의 숫자를 발행 받는다.
- 오름차순으로 정렬된 숫자를 발행 받는다.

3. 사용자는 당첨 번호와 보너스 번호를 입력한다.

- 당첨 번호
  - 1부터 45까지의 숫자 중에서 중복되지 않는 6개의 숫자를 입력해야 한다.
  - 쉼표(,)를 기준으로 구분하며, 숫자 이외의 문자, 띄어쓰기, 특수문자 등을 입력하면 안 된다.
- 보너스 번호
  - 1부터 45까지의 숫자 중에서 당첨 번호 이외의 1개의 숫자만 입력해야 한다.
  - 숫자 이외의 문자, 띄어쓰기, 특수문자 등을 입력하면 안 된다.

4. 입력한 당첨 번호와 보너스 번호로 당첨 내역 및 수익률이 출력 된다.

- 당첨은 1등부터 5등까지 있다. 당첨 기준과 금액은 아래와 같다.
  ```
  1등: 6개 번호 일치 / 2,000,000,000원
  2등: 5개 번호 + 보너스 번호 일치 / 30,000,000원
  3등: 5개 번호 일치 / 1,500,000원
  4등: 4개 번호 일치 / 50,000원
  5등: 3개 번호 일치 / 5,000원
  ```
- 수익률
  - `(당첨된 금액 / 구입한 금액) * 100`으로 산정한다.
  - 수익률은 소수점 둘째 자리에서 반올림한 값으로 (%) 단위로 보여준다.

---

## 📝 구현할 기능 목록

> 기능 목록은 실행할 순서대로 정리한 것이다.

### 구입할 금액 입력 기능

- 로또 구입 금액을 입력 받는다.
- `Console.readLineAsync`를 활용한다.
- 사용자가 입력한 금액을 반환한다.

```
구입금액을 입력해 주세요.
```

### 입력한 금액 유효성 검사와 로또 발행 개수를 구하는 기능

- 구입 금액은 1,000원 단위로 입력 받는다.
- 유효성 검사가 정상적으로 끝나면 숫자형으로 금액을 반환한다.
- 잘못 입력된 경우는 예외 처리한다. 예외를 발생시키는 경우는 아래와 같다.
  - 1000으로 나누어 떨어지지 않는 경우
  - 숫자가 아닌 값을 입력한 경우
- ❗️ 에러 메시지를 출력하고 해당 부분부터 입력을 다시 받아야 한다.

```
[ERROR] 1,000원 단위의 숫자만 입력해주세요.
```

- 사용자가 입력한 금액에 해당하는 만큼 발행할 로또의 개수를 구한다.
- 구입 금액과 로또의 발행 개수를 반환한다.

### 로또 발행 개수를 출력하는 기능

- 반환한 로또 개수를 출력한다.
- 더불어 유효성 검사를 마친 사용자가 입력한 금액과 로또 구매 개수를 반환한다.
- `Console.Print`를 활용한다.

### 로또 발행 기능

- 로또 발행 개수만큼 아래와 같이 발행한다.
  - 1부터 45까지 중복되지 않는 6개의 숫자를 발행한다.
  - `Random.pickUniqueNumbersInRange()`를 활용한다.
  - 오름차순으로 정렬된 배열을 반환한다.
- 발행된 로또 정보를 배열에 담아 반환한다.

### 발행 결과 출력 기능

- 발행된 로또 정보를 출력한다.
- `Console.Print`를 활용한다.

```
8개를 구매했습니다.
[8, 21, 23, 41, 42, 43]
[3, 5, 11, 16, 32, 38]
[7, 11, 16, 35, 36, 44]
[1, 8, 11, 31, 41, 42]
[13, 14, 16, 38, 42, 45]
[7, 11, 30, 40, 42, 43]
[2, 13, 22, 32, 38, 45]
[1, 3, 5, 14, 22, 45]
```

### 당첨 번호 입력 기능

- 당첨 번호를 입력 받는다.
- `Console.readLineAsync`를 활용한다.

```
당첨 번호를 입력해 주세요.
```

### 보너스 번호 입력 기능

- 보너스 번호를 입력 받는다.
- `Console.readLineAsync`를 활용한다.

```
보너스 번호를 입력해 주세요.
```

### 단일 번호 유효성 검사

- 입력한 보너스 번호 유효성 검사로 사용될 수 있다.
- `,`가 없는 단일 번호의 유효성 검사를 위한 것이다.
- 유효성 검사가 정상적으로 끝나면 숫자형으로 번호를 반환한다.
- 예외를 발생시키는 경우는 아래와 같다.
  - 숫자가 아닌 값을 입력한 경우
  - 1부터 45까지의 숫자를 입력하지 않은 경우
  - (보너스 번호인 경우)입력한 보너스 번호가 당첨 번호에 포함된 경우
- ❗️ 에러 메시지를 출력하고 해당 부분부터 입력을 다시 받아야 한다.

```
[ERROR] 로또 번호는 1부터 45 사이의 중복되지 않은 숫자여야 합니다.
```

### 입력한 당첨 번호 유효성 검사

- 당첨 번호는 `,`가 포함된 숫자를 입력 받는다.
- `split(',')`를 사용한 후 `단일 번호 유효성 검사` 메서드를 사용한다.
- 예외를 발생시키는 경우는 아래와 같다.
  - 숫자와 `,`를 제외한 다른 값을 입력한 경우
  - 1부터 45까지의 숫자를 입력하지 않은 경우
  - 중복된 숫자가 있는 경우 (`Set`을 사용하면 중복 문제인지 개수 문제인지 알 수 없으므로 쓰지 않는다.)
  - 6개의 숫자를 입력하지 않은 경우
- ❗️ 에러 메시지를 출력하고 해당 부분부터 입력을 다시 받아야 한다.

```
[ERROR] 로또 번호는 6개여야 합니다.
```

### 당첨 통계 기능

#### 당첨 금액 계산

- 전체 발행된 로또 개수를 가지고 한 개씩 일치된 개수에 따라 수익 금액을 구한다.
- 개수를 기준으로 구하면 `5개 일치 + 보너스 일치`를 숫자로 나타낼 수 없기 때문이다.
- 3개 이상 일치한 경우부터 금액을 구하고 그 이하면 0으로 처리한다.
- 금액이 0인 것은 나중에 일치된 개수를 알아낼 때 사용되지 않으므로 `filter()`로 제외시킨다.

#### 일치된 개수 계산

- 당첨 금액을 `[5000, 50000, 1500000, 30000000, 2000000000]`를 상수로 둔다.
- 당첨 금액 상수와 계산된 당첨 금액을 비교하여 몇 개가 있는지 개수를 구한다.
- `map()`과 `filter()`를 사용한다.

```
5,000원 하나만 당첨됐다고 가정하면,
[5000, 50000, 1500000, 30000000, 2000000000] -> [1, 0, 0, 0, 0]
```

### 당첨 통계 출력 기능

- 계산된 당첨 내역과 수익률을 출력한다.
- `Console.Print`를 활용한다.
- 예시는 아래와 같다.

```
당첨 통계
---
3개 일치 (5,000원) - 1개
4개 일치 (50,000원) - 0개
5개 일치 (1,500,000원) - 0개
5개 일치, 보너스 볼 일치 (30,000,000원) - 0개
6개 일치 (2,000,000,000원) - 0개
```

### 수익 금액과 수익률 계산 기능

- 계산된 당첨 금액을 가지고 수익 금액을 구한다.
- `reducer()`를 사용한다.
- `(수익 금액 / 구입 금액) * 100`으로 수익률을 계산한다.
- 수익률은 `toFixed(1)`를 사용한다. 소수점이 없으면 `.0`을 붙여야 한다.
- 화폐 단위(콤마)로 출력한다. `replace()`을 사용한다.
- 수입 금액과 수익률을 반환한다.

### 수익률 출력 기능

- 계산된 당첨 내역과 수익률을 출력한다.
- `Console.Print`를 활용한다.
- 예시는 아래와 같다.

```
총 수익률은 62.5%입니다.
```

## 필요한 멤버 변수

- 사용자에게 입력 받은 금액: 숫자
- 발행된 로또 개수: 숫자
- 오름차순으로 정렬된 로또 번호들: 2차원 배열
- 오름차순으로 정렬된 로또 번호들을 출력할 문자열
- 사용자에게 입력 받은 당첨 번호: 배열
- 사용자에게 입력 받은 보너스 번호: 숫자
- 발행된 로또 각각의 수익 금액: 배열
- 발행된 로또 중 당첨 번호와 얼마나 일치됐는지의 정보: 배열
- 총 수익 금액: 숫자
- 수익률: 문자(% 단위)

---

## 📌 프로젝트 검토 목록

> 기능 구현, 테스트를 모두 마친 후 다음과 같이 검토한다.

### 요구 사항 검토

- 기능 요구 사항, 프로그래밍 요구 사항, 과제 진행 요구 사항을 준수했는지 검토한다.
- 놓친 부분이 있는지, 이해를 잘못한 부분이 있는지 다시 한 번 검토한다.
  - 함수 또는 메서드
    - 15라인을 넘어간 함수(메서드)가 있는지 확인한다.
    - 한 가지 일만 하도록 구현했는지 검토한다.
    - indent depth가 3이 넘었는지 확인한다.
- 수정하거나 삭제하면 안 되는 곳을 건드렸는지 검토한다.
  - `package.json`을 변경했는지 확인한다.
  - `Lotto`에서 `numbers`의 `#` prefix를 변경했는지 확인한다.
  - `Lotto`에 필드를 추가했는지 확인한다.
- 코딩 컨벤션을 제대로 준수했는지 검토한다.

### 피드백 검토

> 1주차, 2주차 공통 피드백을 잘 적용했는지 검토한다.

- 기능 목록을 다시 한 번 살펴본다.
- if, for, while문 사이의 공백을 지켰는지 확인한다.
- 함수명, 메서드명, 상수명, 변수명 등 이름을 확인한다. (불용어 금지)
- 값을 하드 코딩했는지 확인한다.
- 객체를 생성하는 또다른 방법을 사용했는지 확인한다.
- 테스트를 작성하는 이유와 유용함을 따로 정리해본다.
- 핵심 기능에 가까운 부분부터 작게 테스트를 만들었는지 확인한다.
