# 로또 기능 목록 정리 🎱

## 클래스, 함수 정리

1. Domain

  - 1-1. `LottoGenerator` : 로또 리스트를 생성하는 클래스
    - 구매금액을 생성자로 하여, 유효성 검사를 통해 구매 금액을 통해 로또 리스트를 생성한다.
    - 생성된 로또 티켓들은 이후에  `1-2. LottoCalculator` 를 통해 결과를 계산하거나 처리할 수 있다.

  - 1-2. `LottoCalculator` : 로또 게임의 결과를 계산하는 클래스
    - Lotto 클래스를 상속하고 있으며 bonus를 프라이빗 필드로 설정하여 값 조회가 가능하다. 로또 클래스에서 일반 번호와 함께 선언하고 싶었으나, 제한 사항으로 Calculator에 정의해두었다.
    - 상금 결과 맵을 만들어 총 로또 리스트 개수와 각각의 상금 결과 맵을 만들어 수익률을 계산한다.

2. View

  - 2-1. `InputView` : 사용자로부터 입력을 받아 유효성 검사를 하고, 입력된 데이터를 반환하는 클래스
    - `getInputWithValidate` 는 메소드들의 형태를 포맷팅하여 정의한 메소드이다.
    - 입력을 받아 유효성 검사후 알맞은 형태로 리턴 한다.
    - 구매 금액 입력 처리에 대한 메소드 `purchseAmount`
    - 로또 당첨번호 중 일반번호 입력 처리에 대한 메소드 `winningNumbers`
    - 로또 당첨번호 중 보너스번호 입력 처리에 대한 메소드 `bonusNumber`


  - 2-2. `OutputView` : 프로그램 결과 및 오류 메세지를 사용자에게 출력하는 클래스
    - 각 로또리스트를 포맷팅, 총 구매한 로또 개수와 함께 출력하는 메소드`printPurchasedList`
    - 로또 게임 결과 및 수익률 출력 메소드 `printResult`
    - 입력된 메시지가 정의된 오류메세지라면 출력하는 메소드 `printError`
    - 상금결과 맵을 통한 상금 결과 메세지 생성 `#prizeMessage`


3. Validator

  - 3-1. 사용자 입력에 대한 유효성 검사 함수 `inputValidator`
  - 3-2. 로또 클래스에 대한 유효성 검사 `lottoValidator`

4. Lotto : 로또 리스트 한 개를 의미하는 클래스

  - 4-1. 로또 티켓 생성에 필요한 배열과 유효성 검사 후 `#numbers`에 저장하는 생성자 
  - 4-2. `validate`를 통해 당첨 번호중 일반 번호 유효성 검사 진행 메소드 `validataeWinningNumbers`
  - 4-2. 당첨 번호중 보너스 번호 유효성 검사 진행 메소드 `validateBonusNumber`
  - 4-3. 현재 로또 상금을 계산, 보너스번호 일치 유무 확인 메소드 `calculatePrize`

5. App : 로또 게임 수행 및 실행 클래스

  - 전체 로또 게임을 실행 `play` 
  - 구매한 로또 티켓 목록 출력, 오류 처리 메소드 `printLotto`
  - 로또 게임 결과, 수익률 출력, 오류 처리 메소드 `printResult` 

6. Util

  - 6-1. 필요한 상수 선언 함수 `constants`
  - 6-2. 로또 번호 추첨 시 랜덤으로 난수를 생성하고 정렬하는 함수 `getRandomNumber`
  - 6-3. 에러처리와 처리 이후 재시도 기능을 위한 함수 `handler`
    -  핸들러 함수를 실행하고, 에러가 발생하면 에러 메세지 출력, 재시도 여부 확인, 재시도 실행 호출 하는 형태를 정의해둔 함수 `ErrorHandlerAndRetry`
    - 구매 금액 입력과 객체 생성, 에러 발생시 재시도 핸들러 함수 `lottoGeneratorHandler`
    - 당첨 번호 중 일반번호 입력과 객체 생성, 에러 발생시 재시도 핸들러 함수 `lottoCalculatorHandler`
    - 당첨 번호 중 보너스 번호 입력과 객체 생성, 에러 발생시 재시도 핸들러 함수 `bonusNumberHandler`

7. index
  - 전체 로직을 수행하는 App을 실행하는 진입점


## 예외사항

1. 입력 예외 사항 - 유효성 검사 필요 항목
 - 구입 금액 입력에 대한 예외 사항
 - 당첨 번호 중 일반 번호 입력에 대한 예외 사항
 - 당첨 번호 중 보너스 번호 입력에 대한 예외 사항
 - 로또 생성에 대한 예외 사항

- 구입 금액 입력
  - 단위가 1000으로 나누어 떨어져야한다.
- 당첨 및 보너스 번호 입력
  - 당첨 번호는 각 번호의 구분을 `,`로 한다.
  - 당첨 및 보너스 번호는 1~45 사이의 숫자이다.
  - 당첨 및 보너스 번호는 중복 되어서는 안된다.
  - 보너스 번호는 당첨 번호와 중복 되어서는 안된다.
- 입력 값에 대해 #을 prefix로 적용한다.
- 각각의 기능 요구사항에 대해 클래스로 분리한다.

## 기능 요구 사항

1. 입출력 요구 사항

- 사용자가 잘못된 값을 입력할 경우 throw문을 통해 예외를 발생하게 한다.
- 사용자가 잘못된 값을 입력할 경우 throw문을 사용해 예외를 발생시키고, "[ERROR]"로 시작하는 에러 메시지를 출력하고 해당 부분부터 입력을 다시 받는다.
- 구입 금액 1000원 당 로또 1장이다.
- 구입 금액은 단위가 1000으로 나누어 떨어지지 않는 경우 예외처리한다.
- 발행한 로또 수량 및 번호를 출력할 때 오름차순으로 정렬한 로또 번호를 보여줘야 한다.
- 수익률은 소수점 둘째 자리에서 반올림 한다.

2. Lotto 클래스

- 제공된 Lotto 클래스를 활용해야하며 Lotto에 필드를 추가할 수 없다.


## 구현 기능 목록

### 기능 정리

**1. 흐름에 따른 메인 기능**
- [x] 구입 금액을 입력받는 문구 출력
- [x] 구입 금액 입력
- [x] 구입한 금액에 따른 구매량 출력
- [x] 구입한 로또 목력 출력
- [x] 당첨 번호 입력받는 문구 출력
- [x] 당첨 번호 입력
- [x] 보너스 번호 입력 받는 문구 출력
- [x] 보너스 번호 입력
- [x] 당첨 번호에 따른 데이터 정리
- [x] 당첨 여부에 따른 수익률을 계산
- [x] 당첨 통계(당첨 데이터) 출력
- [x] 당첨 통계(총 수익률) 출력


**2. 부가적으로 필요한 기능**

- [x] 난수(제공받은 랜덤 util 이용)를 통해 로또 번호 생성
- [x] 입력받은 구입 금액에 대한 유효성 검사 
- [x] 당첨 번호 입력 및 유효성 검사
- [x] 보너스 번호 입력 및 유효성 검사
-> 유효성 검사에 대한 경우 - 예외 상황시 에러 문구를 출력하고 해당 부분부터 입력 다시 받기 ✅



### 흐름 정리
 
**1. 구입 금액 입력**

- 1-1. 구입 금액을 입력하라는 안내 문구를 출력한다.
- 1-2. 구입 금액을 입력 받는다.
  - 1-2-1. 구입 금액 입력에 대한 유효성 검증을 진행한다.

**2. 구매 정보 출력**

- 2-1. 구입 금액에 따른 구매 개수를 출력한다.
- 2-2. 구매 개수에 따른 로또 번호들을 출력한다.

**3. 로또 당첨번호 - 기본 당첨 번호 입력**

- 3-1. 당첨 번호를 입력하라는 안내 문구를 출력한다.
- 3-2. 당첨 번호를 입력받는다.
  - 3-2-1. 당첨 번호 입력에 대한 유효성 검증을 진행한다.

**4. 로또 당첨 번호 - 보너스 번호 입력**

-4-1. 보너스 번호를 입력하라는 안내 문구를 출력한다.
-4-2. 보너스 번호를 입력 받는다.
  - 4-2-1. 보너스 번호 입력에 대한 유효성 검증을 진행한다.

**5. 당첨 통계 출력**

5-1. 당첨 통계 안내 메세지와 구분선을 출력한다.
5-2. 3~6개 일치에 대한 개수와 당첨금을 출력한다.
5-3. 총 수익률을 출력한다.


## 🗂️ 파일 구조

┗ src
  ┣ Domain
  ┃  ┣ LottoCalculator.js 
  ┃  ┗ LottoGenerator.js         
  ┣ Validator
  ┃  ┣ inputValidator.js
  ┃  ┗ lottoValidator.js
  ┣ View
  ┃  ┣ InputView.js
  ┃  ┗ OutputView.js
  ┣ Utils
  ┃  ┣ constants.js
  ┃  ┣ handler.js 
  ┃  ┗ getRandomNumber.js
  ┣ App.js
  ┣ Lotto.js
  ┗ index.js