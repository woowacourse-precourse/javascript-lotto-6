# 우아한테크코스 프리코스 6기 3주차 미션 문서

로또 통계 시뮬레이션 프로그램.

1. 값을 입력하면 금액만큼 로또들이 생성된다.
2. 생성된 로또들에 대해 당첨 번호들을 입력하면 통계를 내준다.

총 당첨 금액과 입력 금액에 대한 수익률을 통계내어 보여준다.

## 코멘트

- 클래스(객체)를 분리하는 연습, 도메인 로직에 대한 단위 테스트를 작성하는 연습

- 미션 저장소의 README.md는 소스코드에 앞서 해당 프로젝트가 어떠한 프로젝트인지 마크다운으로 작성하여 소개하는 문서이다. 해당 프로젝트가 어떠한 프로젝트이며, 어떤 기능을 담고 있는지 기술하기 위해서 마크다운문법을 검색해서 학습해보고 적용해 본다.

## 생각

- 2주차에는 최대한 기능을 함수로 나누고 클래스의 사용을 줄였다. 이번에는 모든 것을 클래스(객체)로 만들어봐야겠다.
- 2주차에 최대한 기능별(함수)로 테스트 코드를 나누었었다. 모든 것을 객체로 만들게 되면서 단위 테스트 작성에 험난함이 예상된다.
  - 검색해보니 단위 테스트는 모듈간 결합도롤 최대한 낮추는게 생명이란다.
  - 정 안되면 mock 객체를 만들어서 시뮬레이션 하면 된다. (Stub)
  - 아직 잘 몰라서 시간을 꽤나 쓸 것 같다.
- 계속 프리코스를 진행하면서 테스트의 중요성을 알게 되는 것 같다. 클린하고 최적에 가깝게 테스트 코드를 작성하는 방법에 대해 연구하고 공부할 필요가 있어보인다.
  - 이 것과 관련해서 제약을 추가한다.
  - 최대한 독립된 테스트를 작성한다. 어떤 테스트가 통과해야만 이 테스트가 통과하는 그런 일을 용납하지 않는다.
  - 다른 객체의 기능이나 구조가 바뀌더라도 테스트가 잘 작동해야 한다.
  - 1개의 테스트 함수는 1개의 기능을 테스트 해야 한다.
  - 1개의 테스트 함수는 최소한의 검증 로직을 넣는다. (최소 1개로 줄이자)
- 1클래스 1파일을 지키자.

## 고민

### 꿩이냐 닭이냐?

입력을 받고 입력 값을 검증해야할까? 아니면 입력 값을 사용하는 로직에서 검증해야할까? 아니면 둘 다 해야할까?

입력을 받을 때만 검증한다면 입력 값을 사용하는 로직에 잘못된 값이 들어갔을 때 대처할 수 없을 것이다.

그렇다고 입력 값을 사용하는 로직에서 검증한다면 검증하는 로직 호출이 많이 중복될 가능성이 높다.

그런데 둘 다 한다고 하면 검증 로직 호출이 더 많을 것이다.

검증 로직의 비용이 낮다면 괜찮겠는데, 그게 아니라면 문제가 될 것이다.

비용이냐? 안전성이냐?

## 기능 구현

### 에러 출력

#### 구입 금액 입력 에러

```js
class PurchaseValueError extends Error
```

구입 금액이 올바르지 않을 시 `throw` 되는 에러 클래스.  
아래 메시지들을 구현한다.

- [x] 완료
- "올바르지 않은 숫자 형식입니다."
- "입력한 금액이 1000원 단위가 아닙니다."
- "최소 1개 이상을 구입하셔야 합니다."

#### 당첨 번호 입력 에러

```js
class WinningNumberError extends Error
```

입력한 당첨 번호가 유효하지 않을 시 `throw` 되는 에러 클래스.  
아래 메시지들을 구현한다.

- [x] 완료
- "입력된 당첨 번호가 6개가 아닙니다."
- "당첨 번호가 1~45 사이의 값이 아닙니다."
- "중복된 당첨 번호가 있습니다."

#### 보너스 번호 입력 에러

```js
class BonusNumberError extends Error
```

입력한 당첨 번호가 유효하지 않을 시 `throw` 되는 에러 클래스.  
아래 메시지들을 구현한다.

- [x] 완료
- "당첨 번호가 1~45 사이의 값이 아닙니다."
- "당첨 번호들과 중복되는 번호입니다."

### 입력 검증

```js
class Assert
```

`Assert` 클래스 안에 메소드를 구현한다.

하단의 메서드들은 파라미터, 리턴 값이 없다.  
대신 검증에 실패하면 프로그램을 종료한다.  
(단, 에러를 내어 프로그램을 종료하는 것 이므로 try-catch 로 막을 수 있다.)

- [x] 로또 구입 금액 입력을 검증하는 메소드
  - 입력한 것이 유한한 양의 정수(string, Inf, NaN, 음수)가 아니면 예외 처리
  - 입력한 숫자가 1000으로 나누어 떨어지는가?
  - 최소 1개 이상을 구입할 수 있는가? (1000원 이상인가?)
- [x] 당첨 번호 입력을 검증하는 메소드
  - 입력을 쉼표로 split 하였을 때 나오는 원소가 6개인가?
  - 각 원소들이 전부 [1, 45] 범위의 숫자인가?
  - 각 원소들이 전부 고유한가?
- [x] 보너스 번호 입력을 검증하는 메소드
  - [1, 45] 범위의 숫자인가?
  - 입력된 당첨 번호들과 중복되지 않는가?

### 입력

```js
class Input
```

`Input` 클래스 안에 메소드를 구현한다.  
하단의 메소드들은 메소드 내에서 입력 검증을 거쳐야한다.

- [x] 로또 구입 금액을 입력받는 메소드
- [x] 당첨 번호를 입력받는 메소드
- [x] 보너스 번호를 입력받는 메소드

### 출력

```js
class Logger
```

`Logger` 클래스 안에 메소드를 구현한다.  
무언가를 계산하거나 하는 로직은 존재해서는 안된다.  
계산 결과를 파라미터로 받아 찍어주기만 해야한다.

- [x] 로또 번호들을 출력하는 메소드
- [x] 당첨 통계를 출력하는 메소드

### 금액 관리자

```js
class MoneyManager
```

`MoneyManager` 클래스 안에 메소드를 구현한다.  
구입 금액을 저장하고, 수익률을 계산해준다.

- [x] 구입 금액을 저장하는 메소드
- [x] 당첨 종류와 개수를 넘겨받으면 총 수익금을 계산해주는 메소드
- [x] 수익금을 넘겨받으면 수익률을 계산해주는 메소드

### 로또

```js
class Lotto
```

이미 구현 된 `Lotto` 클래스 안에 메소드를 구현한다.  
로또 번호를 저장하는 클래스이다.

- [x] 단순히 가지고 있는 로또 번호를 리턴하는 메소드
- [x] 입력받은 로또 번호를 오름차순으로 정렬하는 메소드
- [x] 당첨 번호와 보너스 번호에 대한 결과를 주는 메소드

### 로또 관리자

```js
class LottoManager
```

`LottoManager` 클래스 안에 메소드를 구현한다.  
로또 번호를 생성하고, 관리하는 역할을 수행한다.

- [x] 로또 번호들을 개수만큼 만드는 메소드
- [x] 만든 로또 번호를 `Lotto` 인스턴스로 포장하여 멤버에 저장하는 메소드
- [x] 당첨 번호와 보너스 번호를 입력하면 보유한 로또 번호들에 대하여 통계를 계산하는 메소드

### 앱 시뮬레이션

```js
class App
```

이미 구현 된 `App` 클래스 안에 시뮬레이션을 구현한다.  
이전까지 만든 기능들을 총합하여 프로그램을 구성한다.

- [x] 1. 구입 금액을 입력받는다.
- [x] 2. 구입 금액을 이용하여 로또들을 생성한다.
- [x] 3. 생성된 로또들을 오름차순으로 출력한다.
- [x] 4. 당첨 번호와 보너스 번호를 입력받는다.
- [x] 5. 로또 번호들에 대해 통계를 계산한다.
- [x] 6. 그 통계를 출력한다.
