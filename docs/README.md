# 🎟️ 미션 - 로또

<img width="305" alt="image" src="https://github.com/FastSubTeam/front/assets/83483378/dd0fdbbd-da2b-4e73-b6da-59d359959b20">

## 👀 로또 게임 미리보기

![ezgif com-video-to-gif (35)](https://github.com/FastSubTeam/front/assets/83483378/48bf76dd-90b0-4780-a840-9f361edf584f)

## 🚀 기능 구현 목록

### ✅ phase-1 구입금액을 입력 받는다.

- [x] 로또 구입 금액을 입력 받는다.

- [x] 입력받은 로또 구입 금액을 저장한다.
- [x] 예외적인 사항에 대해 유효성 검사를 진행한다.
  - [x] 입력 값은 유효한 숫자 형식이어야 한다.
  - [x] 구입 금액은 1,000원 단위로 나누어 떨어져야 한다.
  - [x] 로또의 1회 최대 구매 가능 금액을 10만원으로 제한한다.
- [x] 구입 금액에 따라 로또 발행 갯수를 환산한다.
- [x] 테스트를 통해 검증한다.

### ✅ phase-2 발행한 로또 수량 및 번호를 출력한다.

- [x] 정해진 범위 내 중복되지 않는 6개의 숫자를 뽑는다.
- [x] 로또 번호를 오름차순으로 정렬한다.
- [x] 로또 발행 갯수만큼 반복한다.
- [x] 테스트를 통해 검증한다.

### ✅ phase-3 당첨 번호를 입력 받는다.

- [x] '당첨 번호를 입력해 주세요.'를 출력하고 사용자의 입력을 받는다.
  - [x] 입력 값은 쉼표를 기준으로 구분할 수 있어야 한다.
  - [x] 쉼표로 구분한 당첨 번호는 서로다른 6개로 이루어져 있어야 한다.
  - [x] 입력 값은 모두 유효한 숫자 형식이어야 한다.
- [x] 쉼표(,)를 기준으로 구분하여 저장한다.
- [x] 테스트를 통해 검증한다.

### ✅ phase-4 보너스 번호를 입력 받는다.

- [x] 입력한 보너스 번호가 유효한지 판별한다.
  - [x] 1부터 45사이의 숫자이다.
  - [x] 당첨 번호와 중복되지 않는다.
- [x] 테스트를 통해 검증한다.

### ✅ phase-5 당첨 내역을 출력한다.

- [x] 발행한 로또 번호와 당첨 번호 및 보너스 번호와 비교하여 일치 갯수를 저장한다.
- [x] 지정된 당첨 내역을 출력한다.
- [x] 테스트를 통해 검증한다.

### ✅ phase-6 수익률을 출력한다.

- [x] 구매 금액과 당첨 금액을 비교하여 수익률을 계산한다.
- [x] 얻은 수익률을 소수점 둘째 자리에서 반올림한다.
- [x] 계산한 수익률을 출력한다.
- [x] 테스트를 통해 검증한다.

## 🔎 실행 결과 예시 분석

```javascript
/**
 * 구입금액 입력 Console.readLineAsync <입력 뷰>
 * 입력에 대한 유효성 검사 진행 [유효성 검사 모델]
 * 구입금액 저장
 */
구입금액을 입력해 주세요.
8000

/**
 * Console.print <출력 뷰>
 * 구입금액에 따른 로또 구매 갯수 도출
 */
8개를 구매했습니다.
/**
 * Console.print <출력 뷰>
 * 로또 구매 갯수에 따른 반복 출력
 * 1부터 45사이 6개의 중복되지 않는 수로 구성된 배열 생성
 */
[8, 21, 23, 41, 42, 43]
[3, 5, 11, 16, 32, 38]
[7, 11, 16, 35, 36, 44]
[1, 8, 11, 31, 41, 42]
[13, 14, 16, 38, 42, 45]
[7, 11, 30, 40, 42, 43]
[2, 13, 22, 32, 38, 45]
[1, 3, 5, 14, 22, 45]

/**
 * 당첨 번호 입력 Console.readLineAsync <입력 뷰>
 * 입력에 대한 유효성 검사 진행 [유효성 검사 모델]
 */
당첨 번호를 입력해 주세요.
1,2,3,4,5,6

/**
 * 보너스 번호 입력 Console.readLineAsync <입력 뷰>
 * 입력에 대한 유효성 검사 진행 [유효성 검사 모델]
 */
보너스 번호를 입력해 주세요.
7

// Console.print <출력 뷰>
당첨 통계
---
/**
 * Console.print <출력 뷰>
 * 구매한 로또 배열과 당첨 번호 + 보너스 번호와 비교
 */
3개 일치 (5,000원) - 1개
4개 일치 (50,000원) - 0개
5개 일치 (1,500,000원) - 0개
5개 일치, 보너스 볼 일치 (30,000,000원) - 0개
6개 일치 (2,000,000,000원) - 0개
/**
 * Console.print <출력 뷰>
 * 구매 금액과 당첨 금액 비교 계산
 * 소수점 둘째 자리에서 반올림
 */
총 수익률은 62.5%입니다.
```

## 🛠️ 리팩토링 목록

### ✅ refactor-1 구입금액을 입력 받는다.

- [x] `LottoStore` 리팩토링
  - [x] 변수명 직관화
  - [x] `getUserLottos()`메소드 책임 분리
- [x] 테스트를 통한 검증
  - [x] LottoStore 테스트 코드 추가
- [x] JSDoc 작성

### ✅ refactor-2 발행한 로또 수량 및 번호를 출력한다.

- [x] `LottoStore` 리팩토링
  - [x] `getUserLottos()` 메소드 책임 분리
  - [x] 구입 수량 계산 분리 `getPurchaseQuantity()`
  - [x] 로또 발급 분리 `publishLottos()`
- [x] string 형 변환 후 발급받은 로또 출력
- [x] Controller & Model에서는 number type을 유지 시키기 위해 OutputView에서 형 변환 후 출력
- [x] 테스트를 통해 검증한다.
  - [x] 발급받은 로또 type 체크

### ✅ refactor-3 당첨 번호를 입력 받는다.

- [x] 가독성을 저하시키는 메소드 체이닝 간소화
  - [x] `parsedNumbers` 변수 추가로 가독성 증진
- [x] `Lotto` 클래스 테스트 코드 추가
- [x] JSDoc 작성

### ✅ refactor-4 보너스 번호를 입력 받는다.

- [x] 유효하지 않은 자릿 수 사이 공백에 대해 예외 테스트.
  - [x] 테스트 코드 내 불필요 변수 선언 제거
- [x] JSDoc 작성

### ✅ refactor-5 당첨 내역을 출력 및 통합 리팩토링

- [x] `Stats` -> `Statistics` 클래스 명 명확화
- [x] 테스트 코드 명 변경
- [x] JSDoc 작성

### ✅ refactor-6 수익률을 출력 및 전체 리팩토링

- [x] LottoController 클래스

  - [x] 불필요 변수 삭제
  - [x] catch문 에러 메시지만 분해 할당 방식으로 수정

- [x] Statistics 클래스

  - [x] 테이블 인덱싱 직관화
  - [x] 인덱스 상수 수정

- [x] Validators
- [x] 유효성 판별 함수 별 단위 테스트 코드 작성

- [x] caculateProfitRate `toFixed(1)` 조건부 사용 (50.0% => 50%)

- [x] JSDoc 작성
