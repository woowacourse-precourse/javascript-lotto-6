# 🎱 3주차 미션 - 로또

> 인생 역전! 숫자를 맞혀라

<br/>

## 📝 구현할 기능

1. 사용자로부터 로또 구입 금액을 입력받는 기능
2. 사용자가 입력한 구입 금액이 유효한 값인지 판별하는 기능
3. 구입 금액에 따른 로또 수량과 번호를 출력하는 기능
4. 사용자로부터 당첨 번호 6자리를 입력받는 기능
5. 사용자가 입력한 당첨 번호가 유효한 값인지 판별하는 기능
6. 사용자로부터 보너스 번호 1자리를 입력받는 기능
7. 사용자가 입력한 보너스 번호가 유효한 값인지 판별하는 기능
8. 사용자가 구매한 로또 번호와 당첨 번호를 비교 및 하는 기능
9. 당첨 기준에 따라 당첨 내역을 출력하는 기능
10. 당첨 기준에 따라 총 수익률을 계산하여 출력하는 기능

<br/>

## 🛠️ 절차 지향 명세 (완료율: 0%)

### 게임 시작

- [x] `App.js`의 `play()`로 게임이 시작된다.

### 구입 금액을 입력받는 기능

- [x] 게임 시작과 동시에 구입 금액 입력을 유도하는 메시지를 출력한다.

### 구입 금액 유효성 검사 기능

- [x] 구입 금액은 양의 정수만 입력 가능하다. (음수, 소수, 공백, 특수문자, 문자열, 0으로 시작하는 숫자 불가)
- [x] 구입 금액은 1000 단위로 나누어 떨어지는 숫자여야 한다.
- [x] 위의 조건을 하나라도 만족하지 않으면 예외를 발생시키고, 게임은 즉시 종료된다.

### 구입 금액에 따른 수량과 번호 출력 기능

- [x] 구입 금액에 따라 로또 수량을 계산한다.
- [x] 계산된 수량만큼의 배열을 랜덤 생성한다.
  - [x] 1개의 로또는 중복되지 않는 숫자로 구성된다.
  - [x] 1개의 로또는 6개의 숫자로 이루어진다.
  - [x] 1개의 로또는 1 이상 45 이하의 숫자로 구성된다.
  - [x] 1개의 로또는 번호를 오름차순으로 정렬한다.
- [x] 로또 수량과 생성된 로또 번호를 출력한다.
  - [x] 1개의 로또에서 맨끝 번호를 제외한 각 번호는 쉼표와 띄어쓰기를 포함하여 출력한다.
  - [x] 1개의 로또는 다른 로또 배열의 구성과 중복없이 출력한다.

### 당첨 번호를 입력받는 기능

- [x] 발행한 로또 수량 및 번호가 모두 출력되면, 사용자로부터 당첨 번호를 입력받도록 한다.

### 당첨 번호 유효성 검사 기능

- [x] 당첨 번호는 양의 정수만 입력 가능하다. (음수, 소수, 공백, 특수문자, 문자열, 0으로 시작하는 숫자 불가)
- [x] 당첨 번호는 쉼표로 구분되어야 한다.
- [x] 당첨 번호는 6개의 숫자만 입력할 수 있다.
- [x] 당첨 번호는 번호들 간의 중복이 없어야 한다.
- [x] 당첨 번호는 1 이상 45 이하의 숫자로만 입력할 수 있다.
- [x] 위의 조건을 하나라도 만족하지 않으면 예외를 발생시키고, 게임은 즉시 종료된다.

### 보너스 번호를 입력받는 기능

- [x] 당첨 번호가 출력되면, 사용자에게 보너스 번호를 입력하도록 한다.

### 보너스 번호 유효성 검사 기능

- [x] 보너스 번호는 양의 정수만 입력 가능하다. (음수, 소수, 공백, 특수문자, 문자열, 0으로 시작하는 숫자 불가)
- [x] 보너스 번호는 1개의 숫자만 입력할 수 있다.
- [x] 보너스 번호는 이미 뽑은 당첨 번호와 중복될 수 없다.
- [x] 보너스 번호는 1 이상 45 이하의 숫자만 입력할 수 있다.
- [x] 위의 조건을 하나라도 만족하지 않으면 예외를 발생시키고, 게임은 즉시 종료된다.

### 로또 번호와 당첨 번호를 비교하는 기능

- [x] 사용자가 구매한 로또 번호와 사용자가 입력한 당첨 번호를 비교한다.
- [x] 사용자가 구매한 로또 번호와 사용자가 입력한 보너스 번호를 비교한다.
- [x] 당첨은 1등부터 5등까지 있다. 당첨 기준과 금액은 아래와 같이 출력된다.
  - [x] 1등은 보너스 번호를 **제외한** 6개의 번호가 일치할 경우다.
  - [x] 2등은 보너스 번호를 **포함한** 6개의 번호가 일치할 경우다.
  - [x] 3등은 보너스 번호를 **제외한** 5개의 번호가 일치할 경우다.
  - [x] 4등은 보너스 번호를 **제외한** 4개의 번호가 일치할 경우다.
  - [x] 5등은 보너스 번호를 **제외한** 3개의 번호가 일치할 경우다.

### 당첨 내역 출력 기능

- [x] 아래와 같은 형식으로 당첨 내역을 출력된다.

  ```
  당첨 통계
  ---
  3개 일치 (5,000원) - 1개
  4개 일치 (50,000원) - 0개
  5개 일치 (1,500,000원) - 0개
  5개 일치, 보너스 볼 일치 (30,000,000원) - 0개
  6개 일치 (2,000,000,000원) - 0개
  총 수익률은 62.5%입니다.
  ```

### 총 수익률 연산 및 출력 기능

- [x] 총 수익률은 `(당첨 금액 / 구입 금액) * 100` 로 계산한다.
- [x] 총 수익률은 소수점 둘째 자리에서 반올림한다. (ex. 100.0%, 51.5%)
- [x] 총 수익률은 % 단위로 출력한다.
- [x] 총 수익률은 1000 단위로 쉼표가 찍힌다. (ex. 1,000,000.0%)

### 게임 종료

- [x] 예외 발생 시, 에러 메시지를 출력하고 해당 부분부터 입력을 다시 받는다.
- [x] 총 수익률 출력과 동시에 애플리케이션이 종료된다.

<br/>

## 🛠️ 객체 지향 명세

> Layered Architecture와 MVC 패턴 적용

### [Model]

- 도메인 모델을 구현
- 도메인의 핵심 로직을 구현

### [View]

- 사용자의 입력과 출력을 담당
- 입력 및 출력한 값이 유효한지 검증

### [Controller]

- 입력 / 출력과 같은 사용자 인터페이스 로직 담당
- 사용자 요청을 응용 영역이 필요로 하는 형식으로 변환해 응용 영역에 전달
- 응용 영역의 응답을 출력 형식에 맞게 변환하여 반환

### [Service]

- 비즈니스 로직을 담당
- 도메인 모델을 이용해 사용자에게 제공할 기능을 구현
- 실제 도메인 로직 구현은 도메인 모델에 위임

### [common]

- `utils` 비즈니스 로직 외의 역할을 담당하는 함수
- `constants` 출력 문자열과 게임 규칙 관련 숫자들을 상수화
- `validator` 유효성 검사하는 메서드

<br/>

## 🥊 예외에 대한 에러

### 구입 금액

- [x] 입력하지 않는 경우 → `[ERROR] 값을 입력해야 합니다.`
- [x] 음수, 소수, 공백, 특수문자, 문자열, 0으로 시작하는 숫자로 입력할 경우 → `[ERROR] 양의 정수여야 합니다.`
- [x] 1000 단위로 나누어 떨어지는 숫자가 아닌 경우 → `[ERROR] 구입 금액은 1000 단위의 숫자로 입력해야 합니다.`

### 당첨 번호

- [x] 입력하지 않는 경우 → `[ERROR] 값을 입력해야 합니다.`
- [x] 음수, 소수, 공백, 특수문자, 문자열, 0으로 시작하는 숫자로 입력할 경우 → `[ERROR] 양의 정수여야 합니다.`
- [x] 쉼표로 구분되지 않는 경우 → `[ERROR] 당첨 번호는 쉼표로 구분해 6개의 숫자로 입력해야 합니다.`
- [x] 6개의 숫자를 입력하지 않는 경우 → `[ERROR] 당첨 번호는 쉼표로 구분해 6개의 숫자로 입력해야 합니다.`
- [x] 번호들 간의 중복이 있는 경우 → `[ERROR] 당첨 번호는 중복 없이 입력해야 합니다.`
- [x] 1 이상 45 이하의 숫자가 아닌 경우 → `[ERROR] 1 이상 45 이하의 숫자여야 합니다.`

### 보너스 번호

- [x] 입력하지 않는 경우 → `[ERROR] 값을 입력해야 합니다.`
- [x] 음수, 소수, 공백, 특수문자, 문자열, 0으로 시작하는 숫자로 입력할 경우 → `[ERROR] 양의 정수여야 합니다.`
- [x] 1개의 숫자를 입력하지 않는 경우 → `[ERROR] 양의 정수여야 합니다.`
- [x] 이미 뽑은 당첨 번호와 중복되는 경우 → `[ERROR] 보너스 번호는 당첨 번호와 중복 없이 입력해야 합니다.`
- [x] 1 이상 45 이하의 숫자가 아닌 경우 → `[ERROR] 1 이상 45 이하의 숫자여야 합니다.`

<br/>

## ✅ 프로그래밍 요구 사항

### 실행 환경

- [x] Node.js `18.17.1 버전`에서 실행 가능한가?
- [x] 프로그램 실행의 시작점인 `App.js`의 `play` 메서드로 실행시킬 수 있는가?

### 기능 요구 사항

- [x] `package.json`을 변경 없이 외부 라이브러리(jQuery, Lodash 등)를 사용하지 않고, 순수 Vanilla JS로만 구현했는가?
- [x] [JavaScript 코드 컨벤션](https://github.com/woowacourse/woowacourse-docs/tree/main/styleguide/javascript)을 지키면서 프로그래밍 했는가?
- [x] 프로그램 종료 시 `process.exit()`를 호출하지 않도록 했나?
- [x] 프로그램 구현이 완료되면 `ApplicationTest`의 모든 테스트가 성공하나?
- [x] 프로그래밍 요구 사항에서 달리 명시하지 않는 한 파일, 패키지 이름을 수정하거나 이동하지 않았는가?
- [x] indent(인덴트, 들여쓰기) depth를 3이 넘지 않도록 2까지만 허용했는가?
- [x] 함수(또는 메서드)가 한 가지 일만 하도록 최대한 작게 만들었는가?
- [x] Jest를 이용하여 본인이 정리한 기능 목록이 정상 동작함을 테스트 코드로 확인했는가?
- [x] 함수(또는 메서드)의 길이가 15라인을 넘어가지 않도록 구현했는가?
- [x] else를 최대한 지양하였는가?
- [x] 도메인 로직에 단위 테스트를 구현했는가? (단, UI(Console.readLineAsync, Console.print) 로직에 대한 단위 테스트는 제외)
- [x] 핵심 로직을 구현하는 코드와 UI를 담당하는 로직을 구분했는가?
- [x] 제공된 `Lotto` 클래스를 활용해 구현했는가? (prefix 변경 및 필드 추가 불가)

### 라이브러리

- [x] `@woowacourse/mission-utils`의 `Random` 및 `Console` API를 사용하여 구현했는가?
- [x] Random 값 추출은 `Random.pickNumberInRange()`를 활용했는가?
- [x] 사용자의 값을 입력 받고 출력하기 위해서는 `Console.readLineAsync`, `Console.print`를 활용했는가?

<br/>

## 🧹 리팩토링

- [x] 모든 출력 메시지와 값을 상수 처리했는가?
- [x] 에러 메시지를 상황에 따라 내용을 세분화 했는가?
- [x] 함수는 하나의 일만 하도록 여러 메서드로 세분화 했는가?
- [x] 불필요한 주석은 없는가?
- [x] 세미콜론, 괄호 간격, 공백 등 컨벤션이 일관적인가?

<br/>

## 🔄 다른 문서 바로가기

- [🎱 미션 개요](./README.md)
- [📦 컨벤션](./convention.md)
